import{ssr as n,ssrHydrationKey as o,escape as t,createComponent as a,ssrElement as k,mergeProps as u,ssrAttribute as i,ssrStyleProperty as P}from"solid-js/web";import{splitProps as ue,createEffect as x,onCleanup as he,createSignal as d,Show as w,For as D,onMount as Z,ErrorBoundary as ge}from"solid-js";import{R as pe,a as ve,t as fe,s as ye,L as be}from"./assets/index-X0SSqWS9.js";import{u as we,M as $e}from"./assets/maplibre-gl-Ukol7sIV.js";import{C as J,L as xe,a as K}from"./assets/chevron_right-6Vm1HLZJ.js";import*as qe from"maplibre-gl";import X from"@turf/destination";import{s as Le,b as ke}from"./assets/lists-D96-zvNg.js";import{a as O,c as De}from"./assets/routing-BfDgGOS4.js";import{c as C}from"./assets/createAsync-Dqt8Sub7.js";import{A as _}from"./assets/components-C2CNEjd6.js";import{d as ee,e as te,g as _e}from"./assets/index-D6PsHaBa.js";import{scaleBand as Me,scaleLinear as Se,axisLeft as ae,axisBottom as Ie,select as Y,min as Te,max as ze}from"d3";import g from"dayjs";import ie from"dayjs/plugin/timezone.js";import oe from"dayjs/plugin/utc.js";import{M as I}from"./assets/index-MNX0u0y8.js";import{u as Fe}from"./assets/index-DGFWRD0-.js";/* empty css                        */import{b as Ce}from"./assets/backend-DPj8aydh.js";import{N as ne}from"./assets/NotFoundMessage-CuXE0hYO.js";import{I as Ae}from"./assets/info-uPCLydNA.js";import"dayjs/plugin/relativeTime.js";import"./assets/lists-CnpuNbOq.js";import"solid-js/store";import"solid-js/web/storage";import"h3";import"unctx";import"node:async_hooks";const Pe=e=>{if(!e.lngLat)throw new Error("Marker - lngLat is required");const[r,l,c]=ue(e,["lngLat","children","showPopup","draggable"],["popup","onOpen","onClose"]),[m]=we();let h=null,y=null;const M=r.lngLat;return x(()=>{m.map&&(y?.remove(),y=new window.MapLib.Popup({closeOnClick:!1,focusAfterOpen:!1,...l.popup}).on("open",()=>l.onOpen?.()).on("close",()=>l.onClose?.()),x(()=>{r.children!==void 0&&(typeof r.children=="string"?y?.setHTML(r.children):y?.setDOMContent(r.children),h?.setPopup(y))}),x(()=>r.showPopup!==y?.isOpen()&&h?.togglePopup()))}),x(()=>{m.map&&(h?.remove(),h=new window.MapLib.Marker(c.options).on("dragstart",()=>c.onDragStart?.()).on("dragend",()=>c.onDragEnd?.()).on("drag",()=>c.onDrag?.(h?.getLngLat().toArray())).setPopup(y).setLngLat(M).addTo(m.map),x(()=>r.showPopup!==y?.isOpen()&&h?.togglePopup()))}),x(()=>h?.setLngLat(r.lngLat)),x(()=>h?.setDraggable(r.draggable)),he(()=>h?.remove()),null};var Ye=["<div",' class="detail-map-container">',"</div>"];function Ne(e){const r=X(e,20,-135,{units:"kilometers"}),l=X(e,20,45,{units:"kilometers"});return[...r.geometry.coordinates,...l.geometry.coordinates]}function Oe(e){const[r,l]=d({center:[e.coordinates?.longitude,e.coordinates?.latitude],zoom:14});return n(Ye,o(),t(a($e,{class:"detail-map",mapLib:qe,get options(){return{accessToken:"pk.eyJ1IjoibWJhZ3JhdGlvbmkiLCJhIjoiY21nYzdvYzRtMWRlaTJrczdhdmFvY3R1ZSJ9.q1gwOrfrGLBRKTef6ylZzQ",style:"https://api.maptiler.com/maps/dataviz-dark/style.json?key=UhseFH2iDqnVh2izRANY",touchZoomRotate:!0,dragRotate:!0,maxZoom:16,maxBounds:Ne([e.coordinates?.longitude,e.coordinates?.latitude])}},get viewport(){return r()},onViewportChange:c=>l(c),get children(){return[a(J,{type:"scale",position:"bottom-left"}),a(J,{type:"navigation",position:"top-left",options:{showCompass:!1,showZoom:!0}}),a(Pe,{get lngLat(){return[e.coordinates?.longitude,e.coordinates?.latitude]},options:{color:"#1E64AB",scale:1.5},get children(){return`<p>Location</p>${e.coordinates?.latitude} N ${e.coordinates?.longitude} E`}})]}})))}var Qe=["<div",' class="location-type"><span class="type-body-3">',"</span><!--$-->","<!--/--></div>"];function Be(e){return n(Qe,o(),e.isMonitor?"Reference grade":"Air sensor",e.isMonitor?t(a(pe,{})):t(a(ve,{})))}var Re='<circle cx="37.785" cy="28.501" r="28.836" fill="#FFF"></circle>',Ee='<path d="M37.441-3.5q13.428 0 22.857 9.372 4.513 4.514 6.857 10.314 2.343 5.8 2.344 12.314-.001 6.572-2.314 12.313-2.315 5.743-6.828 10.143-4.684 4.628-10.629 7.086-5.942 2.457-12.285 2.457c-6.343 0-8.276-.808-12.143-2.429q-5.8-2.428-10.4-7.027t-7-10.372C5.5 34.899 5.5 32.767 5.5 28.5q0-6.343 2.428-12.2t7.057-10.486Q24.127-3.499 37.441-3.5m.116 5.772q-10.971 0-18.458 7.657-3.772 3.829-5.8 8.6a25.2 25.2 0 0 0-2.029 9.972q-.001 5.144 2.029 9.913 2.029 4.774 5.8 8.516t8.515 5.715a25.7 25.7 0 0 0 9.943 1.971q5.14.001 9.973-1.999 4.827-2.001 8.713-5.771 7.485-7.313 7.484-18.344 0-5.314-1.943-10.057-1.941-4.742-5.654-8.458-7.718-7.715-18.573-7.715m-.401 20.915-4.287 2.229q-.686-1.428-1.685-2-1-.57-1.858-.571-4.285 0-4.286 5.657 0 2.57 1.085 4.113 1.086 1.544 3.201 1.544 2.8 0 3.944-2.743l3.942 2q-1.257 2.344-3.486 3.686-2.227 1.343-4.914 1.343-4.286.001-6.915-2.629-2.628-2.628-2.628-7.313 0-4.571 2.657-7.257t6.715-2.686q5.944-.002 8.515 4.627m18.457 0-4.229 2.229q-.686-1.427-1.686-2-1.003-.57-1.914-.571-4.286 0-4.287 5.657 0 2.57 1.086 4.113 1.084 1.544 3.201 1.544 2.799 0 3.941-2.743l4 2q-1.314 2.344-3.541 3.686a9.23 9.23 0 0 1-4.857 1.343q-4.343.001-6.941-2.629-2.603-2.628-2.602-7.313 0-4.571 2.658-7.257 2.655-2.685 6.713-2.686 5.944-.002 8.458 4.627"></path>';const Ve=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"64",height:"64",version:"1.0",viewBox:"5.5 -3.5 64 64"},e),()=>[n(Re),n(Ee)],!0);var He='<circle cx="37.47" cy="28.736" r="29.471" fill="#FFF"></circle>',Ue='<path d="M37.442-3.5q13.485 0 22.743 9.256Q69.499 15.014 69.5 28.5t-9.145 22.458q-9.713 9.543-22.913 9.542-13.029 0-22.513-9.485Q5.501 41.586 5.5 28.5q0-13.143 9.429-22.743Q24.185-3.5 37.442-3.5M12.7 19.872q-1.428 3.943-1.429 8.629 0 10.63 7.77 18.4 7.829 7.716 18.514 7.715 10.8.001 18.63-7.829 2.8-2.685 4.398-5.602l-12.056-5.371q-.63 3.03-3.057 4.942-2.432 1.915-5.744 2.2v4.915h-3.714v-4.915q-5.315-.054-9.714-3.827l4.4-4.457q3.142 2.913 7.143 2.913 1.657.001 2.83-.743 1.171-.74 1.172-2.457 0-1.201-.858-1.943L37.9 31.127l-3.771-1.715-5.086-2.229zM37.557 2.214q-10.914 0-18.457 7.714a30.6 30.6 0 0 0-3.543 4.287L27.786 19.7q.799-2.514 3.029-4.028 2.226-1.513 5.2-1.686V9.071h3.715v4.915q4.4.23 8 2.971l-4.172 4.286q-2.687-1.885-5.486-1.885-1.486 0-2.656.571-1.172.572-1.172 1.943 0 .4.285.8l4.057 1.83 2.8 1.257 5.144 2.285 16.397 7.314a29.5 29.5 0 0 0 .801-6.857q0-11.029-7.656-18.573-7.602-7.714-18.515-7.714"></path>';const je=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"64",height:"64",version:"1.0",viewBox:"5.5 -3.5 64 64"},e),()=>[n(He),n(Ue)],!0);var Ge='<circle cx="37.637" cy="28.806" r="28.276" fill="#FFF"></circle>',We='<path d="M37.443-3.5q13.483 0 22.742 9.257Q69.499 15.072 69.5 28.5q0 13.486-9.145 22.456Q50.641 60.5 37.443 60.5q-12.973 0-22.514-9.43Q5.501 41.642 5.5 28.5t9.429-22.742Q24.186-3.501 37.443-3.5m.114 5.772q-10.914 0-18.457 7.657-7.83 8.001-7.829 18.572 0 10.63 7.77 18.398 7.771 7.772 18.514 7.771 10.685.002 18.629-7.828 7.543-7.257 7.543-18.343 0-10.913-7.656-18.571-7.656-7.656-18.514-7.656m8.572 18.285v13.085h-3.656v15.542h-9.944V33.643h-3.656V20.557q0-.857.599-1.457.602-.6 1.457-.6h13.144q.8 0 1.428.6t.628 1.457m-13.087-8.228q0-4.513 4.458-4.514c4.458-.001 4.457 1.504 4.457 4.514q0 4.457-4.457 4.457c-4.457 0-4.458-1.486-4.458-4.457"></path>';const Ze=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"64",height:"64",version:"1.0",viewBox:"5.5 -3.5 64 64"},e),()=>[n(Ge),n(We)],!0);var Je='<circle cx="36.944" cy="28.631" r="29.105" fill="#FFF"></circle>',Ke='<path d="M37.443-3.5q13.426 0 22.742 9.315Q69.499 15.073 69.5 28.5q0 13.43-9.145 22.514Q50.698 60.5 37.443 60.5q-12.973 0-22.514-9.429-9.428-9.426-9.429-22.57 0-13.085 9.429-22.685Q24.243-3.5 37.443-3.5m.114 5.772q-10.914 0-18.457 7.715-7.83 7.944-7.829 18.513 0 10.686 7.77 18.4 7.771 7.772 18.514 7.771 10.685 0 18.629-7.828 7.543-7.314 7.543-18.343 0-10.97-7.656-18.513-7.601-7.716-18.514-7.715M23.271 23.985q.913-5.886 4.742-9.114t9.314-3.228q7.542.001 12 4.856 4.457 4.858 4.457 12.457 0 7.372-4.627 12.256-4.63 4.885-12.002 4.886-5.429 0-9.371-3.257t-4.743-9.257H31.1q.285 5.829 7.029 5.829 3.37 0 5.428-2.914 2.06-2.914 2.059-7.771 0-5.086-1.885-7.743t-5.43-2.657q-6.401 0-7.2 5.656h2.343l-6.342 6.343-6.343-6.343z"></path>';const Xe=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"64",height:"64",version:"1.0",viewBox:"5.5 -3.5 64 64"},e),()=>[n(Je),n(Ke)],!0);var et='<circle cx="32.064" cy="31.788" r="29.013" fill="#FFF"></circle>',tt='<path d="M31.944 0q13.428 0 22.744 9.314Q64 18.571 64 32c.001 13.429-3.049 16.457-9.146 22.514Q45.198 64 31.943 64q-12.974 0-22.514-9.43Q.001 45.143 0 32.001 0 18.915 9.43 9.316 18.744.001 31.943 0m.117 5.771q-10.915-.001-18.459 7.715Q5.772 21.431 5.772 32q0 10.686 7.771 18.4 7.77 7.772 18.516 7.77 10.685.002 18.627-7.827Q58.229 43.029 58.229 32q-.001-10.969-7.657-18.514-7.601-7.716-18.511-7.715m12.056 18.685v5.485H20.86v-5.485zm0 10.287v5.482H20.86v-5.482z"></path>';const at=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"64.001",height:"64"},e),()=>[n(et),n(tt)],!0);var nt=["<div",' class="tooltip"',">","</div>"],rt=["<div",'><div><a rel="noopener noreferrer" target="_blank"',">",'</a></div><div class="license-attribute-icons"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div></div>"];function T(e){return n(nt,o(),i("title",t(e.title,!0),!1),t(e.children))}function st(e){const r={width:32,height:32,fill:"#5a6672"},l=[30,32,41].indexOf(e.id)>-1;return n(rt,o(),i("href",t(e.sourceUrl,!0),!1),t(e.name),t(a(w,{when:l,get children(){return a(T,{title:"Creative Commons",get children(){return a(Ve,u({class:"cc-class"},r))}})}})),t(a(w,{get when(){return!e.commercialUseAllowed},get children(){return a(T,{title:"Only non-commercial uses of the work are permitted.",get children(){return a(je,u({class:"nc-class"},r))}})}})),t(a(w,{get when(){return e.attributionRequired},get children(){return a(T,{title:"Attribution: Credit must be given to the creator.",get children(){return a(Ze,u({class:"by-class"},r))}})}})),t(a(w,{get when(){return e.shareAlikeRequired},get children(){return a(T,{title:"Share Alike: Adaptations must be shared under the same terms.",get children(){return a(Xe,u(r,{class:"sa-class"}))}})}})),t(a(w,{get when(){return!e.modificationAllowed},get children(){return a(T,{title:"No derivatives or adaptations of the work are permitted.",get children(){return a(at,u(r,{class:"nd-class"}))}})}})))}var it='<path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q17-72 85-137t145-65q33 0 56.5 23.5T520-716v242l64-62 56 56-160 160-160-160 56-56 64 62v-242q-76 14-118 73.5T280-520h-20q-58 0-99 41t-41 99 41 99 99 41h480q42 0 71-29t29-71-29-71-71-29h-60v-80q0-48-22-89.5T600-680v-93q74 35 117 103.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160zm220-358"></path>';const le=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>n(it),!0);var ot=["<ul",' class="lists-list"><!--$-->',"<!--/--><!--$-->","<!--/--></ul>"],lt=["<li",' class="btn btn-tertiary">',"</li>"],dt=["<div",'><span class="type-body-3"><!--$-->',"<!--/--> or <!--$-->","<!--/--> to add this location to a list.</span></div>"],ct=["<a",' href="#download-card" class="icon-btn btn-tertiary download-anchor">Download data<!--$-->',"<!--/--></a>"],mt=["<tr","><td>Licenses</td><td>","</td></tr>"],ut=["<section",' class="detail-overview"><div class="detail-overview__title"><div><span class="type-subtitle-3 text-smoke-120">','</span><h1 class="type-display-1 text-sky-120">',"</h1></div><div>",'</div></div><div class="detail-overview__body"><div class="location-map">','</div><div class="divider"> </div><div class="location-characteristics"><h3>CHARACTERISTICS</h3><table class="characteristics-table"><tbody><tr><td>Type</td> <td><!--$-->','<!--/--><p class="type-body-2">',"</p></td></tr><tr><td>Owner</td><td>","</td></tr><tr><td>Measures</td><td>","</td></tr><tr><td>Name</td><td>","</td></tr><tr><td>Reporting</td><td><p>","</p><p>","</p></td></tr><tr><td>Provider</td><td>","</td></tr><!--$-->",'<!--/--></tbody></table></div><div class="divider"> </div><div class="location-lists"><h3 class="type-subtitle-3 text-smoke-180">LISTS</h3><!--$-->',"<!--/--></div></div></section>"];function ht(e){const r=C(()=>Le(e.sensorNodesId),{initialValue:[],deferStream:!0});return n(ot,o(),t(a(D,{get each(){return r()},children:l=>a(_,{class:"list-link",get href(){return`/lists/${l.listsId}`},get children(){return n(lt,o(),t(l.label))}})})),t(a(be,{get redirect(){return e.pathname}})))}function gt(){const e=O();return n(dt,o(),t(a(_,{get href(){return`/register?redirect=${e.pathname}`},class:"text-ocean-120",children:"Sign up"})),t(a(_,{get href(){return`/login?redirect=${e.pathname}`},class:"text-ocean-120",children:"login"})))}function pt(e){const r=O(),l={width:24,height:24};return n(ut,o(),t(e?.name),t(e.name)||"No label",t(a(w,{get when(){return e.datetimeFirst},get children(){return n(ct,o(),t(a(le,u({class:"cloud-download-icon"},l))))}})),t(a(Oe,{get coordinates(){return e.coordinates}})),t(a(Be,e)),e.isMobile?"Mobile":"Stationary",t(e.owner?.name),t(e.sensors?.map(c=>`${c.parameter.displayName} ${c.parameter.units}`).join(", ")),t(e.name),e.datetimeLast?`Updated ${t(fe(e.datetimeLast?.local))}`:"No measurements",e.datetimeLast?`Reporting since ${t(ye(e.datetimeFirst?.local))}`:"No measurements",t(e.provider?.name),t(a(w,{get when(){return Array.isArray(e.licenses)&&e.licenses.length>0},get children(){return n(mt,o(),t(a(D,{get each(){return e.licenses},children:c=>a(st,c)})))}})),t(a(w,{get when(){return e.user?.()?.usersId},get fallback(){return a(gt,{})},get children(){return[e.lists,a(ht,{get sensorNodesId(){return e.id},get pathname(){return r.pathname}})]}})))}var vt=["<div",' style="','" class="box-plot-tooltip" role="tooltip"><div class="box-plot-tooltip__head"><span class="type-body3 text-white">','</span></div><div class="box-plot-tooltip__body"><div class="box-plot-legend-item"><div class="bg-smoke-10 box-plot-legend-color"></div><div><span class="type-body-3">','</span><span class="type-body-1">µg/m³</span></div><div class="box-plot-legend-item-label"><span class="type-body-1">98<sup>th</sup> percentile</span></div></div><div class="box-plot-legend-item"><div class="bg-lavender-100 box-plot-legend-color"></div><div><span class="type-body-3">','</span><span class="type-body-1">µg/m³</span></div><div class="box-plot-legend-item-label"><span class="type-body-1">75<sup>th</sup> percentile</span></div></div><div class="box-plot-legend-item bg-sky-1"><div class="bg-lavender-120 box-plot-legend-color"></div><div><span class="type-body-3"><!--$-->','<!--/--> </span><span class="type-body-1">µg/m³</span></div><div class="box-plot-legend-item-label"><span class="type-body-1">Median</span></div></div><div class="box-plot-legend-item"><div class="bg-lavender-100 box-plot-legend-color"></div><div><span class="type-body-3"><!--$-->','<!--/--> </span><span class="type-body-1">µg/m³</span></div><div class="box-plot-legend-item-label"><span class="type-body-1">25<sup>th</sup> percentile</span></div></div><div class="box-plot-legend-item"><div class="bg-smoke-10 box-plot-legend-color"></div><div><span class="type-body-3"><!--$-->','<!--/--> </span><span class="type-body-1">µg/m³</span></div><div class="box-plot-legend-item-label"><span class="type-body-1">2<sup>nd</sup> percentile</span></div></div></div></div>'],ft=["<text",' text-anchor="middle"',">Loading...</text>"],yt=["<svg",' width="','" height="','"><g class="','" transform="','"></g><g transform="','"><!--$-->',"<!--/--><!--$-->",'<!--/--></g><g class="','" transform="','"></g><g class="','" transform="','"></g></svg>'],bt=["<g",' class="box-plot-bar"><line stroke-width="2" stroke="#CCCCCC" class="whiskers"',"></line><line",' stroke="#EAE7FF" class="box"','></line><line stroke-width="2" stroke="#8576ED" class="q3"','></line><line stroke-width="2" stroke="#8576ED" class="q1"','></line><line stroke-width="4" stroke="#584DAE" class="median"',"></line></g>"];function wt(e){return n(vt,o(),P("top:",`${t(e.data.style?.y,!0)}px`)+P(";left:",`${t(e.data.style?.x,!0)}px`)+P(";display:",`${t(e.data.style?.display,!0)||"none"}`),t(e.data?.period),t(e.data?.values?.max),t(e.data.values?.interquartileTop),t(e.data.values?.median),t(e.data.values?.interquartileBottom),t(e.data.values?.min))}function $t(e){const[r,l]=d({style:{display:"none",y:0,x:0}}),[c,m]=d([]),h=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","00"],y=["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","00:00"],M=Object.assign(...h.map((s,b)=>({[s]:y[b]}))),q=(s=>Object.keys(s).sort((b,S)=>parseInt(b)-parseInt(S)))(M),z=M,$=e.width/q.length-5,v=Me().range([0,e.width]).domain(q),p=Se().range([e.height,0]),L=()=>{const s=e.data==null?0:Te(e.data,b=>b.summary.q02);p.domain([s<0?s:0,e.data==null?0:ze(e.data,b=>b.summary.q98*1.1)])},Q=q.length>12?v.domain().filter((s,b)=>b%3==0).sort((s,b)=>parseInt(b)-parseInt(s)):q,F=ae(p).ticks(6),B=ae(p).tickSize(-e.width).tickFormat("").ticks(6),R=Ie(v).tickValues(Q).tickFormat(s=>z[s]);return x(()=>{e.data&&(m(e.data),L(),Y(`.box-plot-x-axis-${e.name}`).call(R),Y(`.box-plot-y-axis-${e.name}`).call(F),Y(`.box-plot-grid-${e.name}`).call(B).selectAll("line,path").style("stroke","#d4d8dd"))}),[a(wt,{get data(){return r()}}),n(yt,o(),`${t(e.width,!0)+t(e.margin,!0)}px`,`${t(e.height,!0)+t(e.margin,!0)}px`,`chart-grid box-plot-grid-${t(e.name,!0)}`,`translate(${t(e.margin,!0)/2} ${t(e.margin,!0)/2} )`,`translate(${t(e.margin,!0)/1.8+t($,!0)/2} ${t(e.margin,!0)/2})`,t(a(w,{get when(){return e.loading},get children(){return n(ft,o(),i("x",t(e.width,!0)/2,!1)+i("y",t(e.height,!0)/2,!1))}})),t(a(D,{get each(){return c()},children:s=>n(bt,o(),i("x1",t(v(s.period.label),!0),!1)+i("x2",t(v(s.period.label),!0),!1)+i("y1",t(p(s.summary.q02),!0),!1)+i("y2",t(p(s.summary.q98),!0),!1),i("stroke-width",t($,!0),!1),i("x1",t(v(s.period.label),!0),!1)+i("x2",t(v(s.period.label),!0),!1)+i("y1",t(p(s.summary.q25),!0),!1)+i("y2",t(p(s.summary.q75),!0),!1),i("x1",t(v(s.period.label),!0)-t($,!0)/2,!1)+i("x2",t(v(s.period.label),!0)+t($,!0)/2,!1)+i("y1",t(p(s.summary.q75),!0),!1)+i("y2",t(p(s.summary.q75),!0),!1),i("x1",t(v(s.period.label),!0)-t($,!0)/2,!1)+i("x2",t(v(s.period.label),!0)+t($,!0)/2,!1)+i("y1",t(p(s.summary.q25),!0),!1)+i("y2",t(p(s.summary.q25),!0),!1),i("x1",t(v(s.period.label),!0)-t($,!0)/2,!1)+i("x2",t(v(s.period.label),!0)+t($,!0)/2,!1)+i("y1",t(p(s.summary.median),!0),!1)+i("y2",t(p(s.summary.median),!0),!1))})),`box-plot-y-axis-${t(e.name,!0)}`,`translate(${t(e.margin,!0)/2} ${t(e.margin,!0)/2})`,`box-plot-x-axis-${t(e.name,!0)}`,`translate(${t(e.margin,!0)/2} ${t(e.height,!0)+t(e.margin,!0)/2})`)]}var xt='<path d="M582-298 440-440v-200h80v167l118 118zM440-720v-80h80v80zm280 280v-80h80v80zM440-160v-80h80v80zM160-440v-80h80v80zM480-80q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m0-80q134 0 227-93t93-227-93-227-227-93-227 93-93 227 93 227 227 93m0-320"></path>';const qt=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>n(xt),!0);var Lt=["<div",' class="timezone-disclaimer"><!--$-->',"<!--/--><span>Chart shows local times (<!--$-->","<!--/--> UTC<!--$-->","<!--/-->)</span></div>"],kt=["<section",' class="detail-charts"><div><header class="detail-charts__header"><h1 class="heading">Latest Readings</h1></header><div class="chart-container"><div class="chart-controls"><select name="sensor-select" id="sensor-select" class="select">','</select><select name="time-range-select" id="time-range-select" class="select"><option value="24">Last 24 hours</option><option value="48">Last 48 hours</option><option value="72">Last 72 hours</option><option value="168">Last 1 week</option><option value="720">Last 30 days</option></select><select name="scale-type-select" id="scale-type-select" class="select"><option value="linear" selected>Linear</option><option value="log">Logarithmic</option></select><button class="btn btn-secondary">Update</button></div><div><!--$-->',"<!--/--><!--$-->",'<!--/--></div></div></div><hr class="horizontal-rule"><div><header class="detail-charts__header"><h1 class="heading">Patterns</h1></header><div class="chart-container"><div class="chart-controls"><select name="sensor-select" id="sensor-select" class="select">','</select><select name="time-range-select" id="time-range-select" class="select">','</select><button class="btn btn-secondary">Update</button></div><div><div><h3 class="type-header-3">Hour of day</h3><!--$-->',"<!--/--></div><!--$-->","<!--/--></div></div></div></section>"],re=["<option","><!--$-->","<!--/--> <!--$-->","<!--/--></option>"],Dt=["<option",">","</option>"];g.extend(oe);g.extend(ie);function _t(e){return 3600*e*1e3}function N(e,r){const l=g(r).diff(e,"year"),c=g(e).year();return Array.from({length:l+1},(m,h)=>String(h+c)).reverse()}function se(e){return n(Lt,o(),t(a(qt,{width:24,height:24,fill:"#5a6672",role:"img"})),t(e.timezone),t(g(new Date).tz(e.timezone).format("Z")))}function Mt(e){const[r,l]=d(0),[c,m]=d(24);Z(()=>{l(document.body.clientWidth)});const h=()=>r()<800?(m(4),300):r()<1200?(m(12),800):(m(24),1200),[y,M]=d(e.sensors?.[0].id),[A,q]=d(!0),[z,$]=d(e.sensors?.[0].id),[v,p]=d("linear"),[L,Q]=d("linear"),F=24,[B,R]=d(F),[s,b]=d(g.tz(Date.now()-_t(F),e.timezone).toISOString()),[S]=d(g.tz(Date.now(),e.timezone).toISOString()),[de,E]=d([]),[ce,V]=d([]),[H,Vt]=d(N(e.datetimeFirst.utc,e.datetimeLast.utc)[0]);function U(){const f=H();return g(new Date(`${f}-01-01`)).tz(e.timezone).toISOString()}function j(){const f=H();return g(new Date(`${Number(f)+1}-01-01`)).tz(e.timezone).toISOString()}Z(async()=>{E(await ee(y(),s(),S())),q(!1),V(await te(W(),"hourofday",U(),j())),G(!1)}),x(async()=>{E(await ee(z(),s(),S())),q(!1)}),x(async()=>{V(await te(W(),"hourofday",U(),j())),G(!1)});const[Ht,Ut]=d(e.sensors?.[0].id),[jt,Gt]=d(N(e.datetimeFirst?.utc,e.datetimeLast?.utc)[0]),[me,G]=d(!0),[W,Wt]=d(e.sensors?.[0].id);return n(kt,o(),t(a(D,{get each(){return e.sensors},children:f=>n(re,o()+i("value",t(f.id,!0),!1),t(f.parameter.displayName),t(f.parameter.units))})),t(a(xe,{get width(){return h()},height:250,margin:100,get xTicks(){return c()},get dateFrom(){return s()},get dateTo(){return S()},get data(){return de()},get scale(){return L()},get loading(){return A()},get timezone(){return e.timezone},noDataMessage:"  No data in selected time range"})),t(a(se,{get timezone(){return e.timezone}})),t(a(D,{get each(){return e.sensors},children:f=>n(re,o()+i("value",t(f.id,!0),!1),t(f.parameter.displayName),t(f.parameter.units))})),t(a(D,{get each(){return N(e.datetimeFirst?.utc,e.datetimeLast?.utc)},children:(f,Zt)=>n(Dt,o()+i("value",t(f,!0),!1),t(f))})),t(a($t,{name:"time-of-day",width:350,height:350,period:"hour",margin:80,get data(){return ce()},get loading(){return me()}})),t(a(se,{get timezone(){return e.timezone}})))}var St='<path d="M160-120v-480l320-240 320 240v480H560v-280H400v280z"></path>';const It=(e={})=>k("svg",u({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>n(St),!0);var Tt=["<div",' class="breadcrumbs"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->",'<!--/--><span class data-testid="page-name">',"</span></div>"];function zt(e){const r={width:24,height:24,fill:"#5a6672"};return n(Tt,o(),t(a(_,{href:"https://openaq.org",get children(){return a(It,u(r,{fill:"#33a3a1"}))}})),t(a(K,r)),t(a(_,{href:"/",children:"Explore the data"})),t(a(K,r)),t(e.pageName))}var Ft=["<div",'><span class="type-body-3"><!--$-->',"<!--/--> or <!--$-->","<!--/--> to download data from this location.</span></div>"],Ct=["<h3",' class="type-subtitle-1 text-sky-120">Download Data CSV</h3>'],At=["<span",' class="type-body-1 text-smoke-120">Data downloads on OpenAQ Explorer are limited to 1000 records per parameter or 30 days, whichever is larger. For larger downloads use the OpenAQ API. Read more about the OpenAQ API at <a href="https://docs.openaq.org" target="_blank" rel="noreferrer noopener">https://docs.openaq.org</a></span>'],Pt=["<form",' method="post" class="download-form"><input type="hidden" name="timezone"','><label for>Start date</label><input type="date" name="date-from" id="date-from-input"',' class="date-input"><label for>End date</label><input type="date" name="date-to" id="date-to-input"',' class="date-input"><div class="parameter-inputs">','</div><button type="submit" class="','"',">Download CSV <!--$-->","<!--/--></button></form>"],Yt=["<label"," for><!--$-->","<!--/--> <!--$-->","<!--/--></label>"],Nt=["<input",' checked type="checkbox" class="checkbox" name="','" id="','">'];g.extend(oe);g.extend(ie);function Ot(){const e=O();return n(Ft,o(),t(a(_,{get href(){return`/register?redirect=${e.pathname}#download-card`},class:"text-ocean-120",children:"Sign up"})),t(a(_,{get href(){return`/login?redirect=${e.pathname}#download-card`},class:"text-ocean-120",children:"login"})))}function Qt(e){const r={width:32,height:32,fill:"##33a3a1"},[l,c]=d(!1),[m,h]=d(!1),[y,M]=d(g(new Date-864e5,e.timezone).format("YYYY-MM-DD")),[A,q]=d(),[z,$]=d(g(new Date,e.timezone).format("YYYY-MM-DD")),[v,p]=d();return[n(Ct,o()),n(At,o()),n(Pt,o(),i("value",t(e.timezone,!0),!1),i("value",t(g(+new Date-864e5,e.timezone).format("YYYY-MM-DD"),!0),!1)+i("max",t(g(new Date,e.timezone).format("YYYY-MM-DD"),!0),!1),i("value",t(g(new Date,e.timezone).format("YYYY-MM-DD"),!0),!1)+i("max",t(g(new Date,e.timezone).format("YYYY-MM-DD"),!0),!1),t(a(D,{get each(){return e.sensors},children:L=>[n(Yt,o(),t(L.parameter.displayName),t(L.parameter.units)),n(Nt,o(),`checkbox-sensor-${t(L.id,!0)}`,`checkbox-sensor-${t(L.id,!0)}`)]})),`icon-btn btn-secondary ${l()?"btn-secondary--disabled":""}`,i("disabled",!!l(),!0),t(a(le,u({class:"download-icon"},r))))]}function Bt(e){const r=`OpenAQ Location ID ${e.locationsId}`,l=`Details about monitoring location, OpenAQ ID ${e.locationsId}. Browse the measurements data and download when logged in.`,c=`https://explore.openaq.org/locations/${e.locationsId}`;return[a(I,{property:"og:title",content:r}),a(I,{property:"og:description",content:l}),a(I,{property:"og:url",content:c}),a(I,{property:"og:locale",content:"en_US"}),a(I,{property:"og:site_name",content:"OpenAQ Explorer"})]}var Rt=["<section",' id="download-card" class="download-card"><header class="download-card__header"><h3 class="heading">Download</h3></header><!--$-->',"<!--/--></section>"],Et=["<main",' class="location-main"><div class="breadcrumb-container"><!--$-->','<!--/--><section class="getting-started-section"><!--$-->','<!--/--><a href="/getting-started" class="getting-started-link">Learn how to use the Explorer</a></section></div><!--$-->',"<!--/--><!--$-->","<!--/--></main>"];function ka(){const{id:e}=De(),[r,{setSelectedLocationsId:l}]=Fe();l(Number(e));const c=C(()=>Ce(),{deferStream:!0}),m=C(()=>ke(Number(e)).catch(()=>null),{deferStream:!0}),h=C(()=>_e(Number(e)),{deferStream:!0});return a(ge,{fallback:()=>a(ne,{}),get children(){return a(w,{get when(){return m()},get fallback(){return a(ne,{})},get children(){return[a(Bt,{get locationsId(){return Number(e)},get locationName(){return m()?.name}}),n(Et,o(),t(a(zt,{get pageName(){return m()?.name}})),t(a(Ae,{viewBox:"0 0 25 25",role:"img","aria-label":"Info Icon",class:"info-icon"})),t(a(pt,u(m,{get licenses(){return h()},user:c}))),t(a(w,{get when(){return m().datetimeFirst},get children(){return[a(Mt,u(m)),n(Rt,o(),t(a(w,{get when(){return c()?.usersId},get fallback(){return a(Ot,{})},get children(){return a(Qt,u(m))}})))]}})))]}})}})}export{ka as default};
