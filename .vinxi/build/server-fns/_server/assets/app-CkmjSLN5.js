import{createComponent as d,isServer as O,getRequestEvent as U,delegateEvents as T}from"solid-js/web";import{F as j}from"./server-fns-De_oUqWX.js";import{children as x,createMemo as y,getOwner as B,untrack as D,Show as F,on as N,createRoot as K,createSignal as W,onCleanup as I,sharedConfig as S,Suspense as V}from"solid-js";import{S as _}from"./index-DGFWRD0-.js";import{a as H}from"./index-MNX0u0y8.js";import{i as J,j as M,R as z,g as G,k as Q,l as P,o as X,s as k,m as Y,p as Z,q as $,r as tt,t as et}from"./routing-BfDgGOS4.js";import{w as rt}from"./backend-DPj8aydh.js";import"cookie-es";import"seroval";import"seroval-plugins/web";import"solid-js/web/storage";import"h3";import"node:async_hooks";import"radix3";/* empty css                */import"./user-Csyx7oEn.js";import"crypto";import"util";import"nanoid";import"dayjs";import"dayjs/plugin/utc.js";import"@zxcvbn-ts/core";import"@zxcvbn-ts/language-common";import"@zxcvbn-ts/language-en";/* empty css              */import"./lists-D96-zvNg.js";/* empty css                    *//* empty css                 */import"./index-D6PsHaBa.js";import"dayjs/plugin/timezone.js";/* empty css              *//* empty css                 */import"solid-js/store";import"unctx";const q=t=>r=>{const{base:o}=r,n=x(()=>r.children),e=y(()=>J(n(),r.base||""));let s;const u=M(t,e,()=>s,{base:o,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return t.create&&t.create(u),d(z.Provider,{value:u,get children(){return d(nt,{routerState:u,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(s=B())&&null,d(ot,{routerState:u,get branches(){return e()}})]}})}})};function nt(t){const r=t.routerState.location,o=t.routerState.params,n=y(()=>t.preload&&D(()=>{k(!0),t.preload({params:o,location:r,intent:G()||"initial"}),k(!1)}));return d(F,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:e=>d(e,{params:o,location:r,get data(){return n()},get children(){return t.children}})})}function ot(t){if(O){const e=U();if(e&&e.router&&e.router.dataOnly){at(e,t.routerState,t.branches);return}e&&((e.router||(e.router={})).matches||(e.router.matches=t.routerState.matches().map(({route:s,path:u,params:f})=>({path:s.originalPath,pattern:s.pattern,match:u,params:f,info:s.info}))))}const r=[];let o;const n=y(N(t.routerState.matches,(e,s,u)=>{let f=s&&e.length===s.length;const h=[];for(let l=0,p=e.length;l<p;l++){const w=s&&s[l],g=e[l];u&&w&&g.route.key===w.route.key?h[l]=u[l]:(f=!1,r[l]&&r[l](),K(v=>{r[l]=v,h[l]=Q(t.routerState,h[l-1]||t.routerState.base,C(()=>n()[l+1]),()=>t.routerState.matches()[l])}))}return r.splice(e.length).forEach(l=>l()),u&&f?u:(o=h[0],h)}));return C(()=>n()&&o)()}const C=t=>()=>d(F,{get when(){return t()},keyed:!0,children:r=>d(X.Provider,{value:r,get children(){return r.outlet()}})});function at(t,r,o){const n=new URL(t.request.url),e=P(o,new URL(t.router.previousUrl||t.request.url).pathname),s=P(o,n.pathname);for(let u=0;u<s.length;u++){(!e[u]||s[u].route!==e[u].route)&&(t.router.dataOnly=!0);const{route:f,params:h}=s[u];f.preload&&f.preload({params:h,location:r.location,intent:"preload"})}}function it([t,r],o,n){return[t,n?e=>r(n(e)):r]}function st(t){let r=!1;const o=e=>typeof e=="string"?{value:e}:e,n=it(W(o(t.get()),{equals:(e,s)=>e.value===s.value&&e.state===s.state}),void 0,e=>(!r&&t.set(e),S.registry&&!S.done&&(S.done=!0),e));return t.init&&I(t.init((e=t.get())=>{r=!0,n[1](o(e)),r=!1})),q({signal:n,create:t.create,utils:t.utils})}function ut(t,r,o){return t.addEventListener(r,o),()=>t.removeEventListener(r,o)}function ct(t,r){const o=t&&document.getElementById(t);o?o.scrollIntoView():r&&window.scrollTo(0,0)}function lt(t){const r=new URL(t);return r.pathname+r.search}function mt(t){let r;const o={value:t.url||(r=U())&&lt(r.request.url)||""};return q({signal:[()=>o,n=>Object.assign(o,n)]})(t)}function dt(t=!0,r=!1,o="/_server",n){return e=>{const s=e.base.path(),u=e.navigatorFactory(e.base);let f,h;function l(a){return a.namespaceURI==="http://www.w3.org/2000/svg"}function p(a){if(a.defaultPrevented||a.button!==0||a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)return;const i=a.composedPath().find(A=>A instanceof Node&&A.nodeName.toUpperCase()==="A");if(!i||r&&!i.hasAttribute("link"))return;const m=l(i),c=m?i.href.baseVal:i.href;if((m?i.target.baseVal:i.target)||!c&&!i.hasAttribute("state"))return;const b=(i.getAttribute("rel")||"").split(/\s+/);if(i.hasAttribute("download")||b&&b.includes("external"))return;const R=m?new URL(c,document.baseURI):new URL(c);if(!(R.origin!==window.location.origin||s&&R.pathname&&!R.pathname.toLowerCase().startsWith(s.toLowerCase())))return[i,R]}function w(a){const i=p(a);if(!i)return;const[m,c]=i,E=e.parsePath(c.pathname+c.search+c.hash),b=m.getAttribute("state");a.preventDefault(),u(E,{resolve:!1,replace:m.hasAttribute("replace"),scroll:!m.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function g(a){const i=p(a);if(!i)return;const[m,c]=i;n&&(c.pathname=n(c.pathname)),e.preloadRoute(c,m.getAttribute("preload")!=="false")}function v(a){clearTimeout(f);const i=p(a);if(!i)return h=null;const[m,c]=i;h!==m&&(n&&(c.pathname=n(c.pathname)),f=setTimeout(()=>{e.preloadRoute(c,m.getAttribute("preload")!=="false"),h=m},20))}function L(a){if(a.defaultPrevented)return;let i=a.submitter&&a.submitter.hasAttribute("formaction")?a.submitter.getAttribute("formaction"):a.target.getAttribute("action");if(!i)return;if(!i.startsWith("https://action/")){const c=new URL(i,Y);if(i=e.parsePath(c.pathname+c.search),!i.startsWith(o))return}if(a.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const m=rt.get(i);if(m){a.preventDefault();const c=new FormData(a.target,a.submitter);m.call({r:e,f:a.target},a.target.enctype==="multipart/form-data"?c:new URLSearchParams(c))}}T(["click","submit"]),document.addEventListener("click",w),t&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",L),I(()=>{document.removeEventListener("click",w),t&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",L)})}}function ht(t){if(O)return mt(t);const r=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,e=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:e}},o=Z();return st({get:r,set({value:n,replace:e,scroll:s,state:u}){e?window.history.replaceState($(u),"",n):window.history.pushState(u,"",n),ct(decodeURIComponent(window.location.hash.slice(1)),s),tt()},init:n=>ut(window,"popstate",et(n,e=>{if(e&&e<0)return!o.confirm(e);{const s=r();return!o.confirm(s.value,{state:s.state})}})),create:dt(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:o}})(t)}function Gt(){return d(_,{get children(){return d(ht,{singleFlight:!0,root:t=>d(H,{get children(){return d(V,{get children(){return t.children}})}}),get children(){return d(j,{})}})}})}export{Gt as default};
