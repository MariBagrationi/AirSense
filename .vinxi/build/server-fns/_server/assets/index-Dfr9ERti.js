import{isServer as re,ssr as m,ssrHydrationKey as f,escape as r,createComponent as s,ssrStyleProperty as N,ssrAttribute as w,ssrElement as P,mergeProps as y}from"solid-js/web";import{u as Z,M as oe,S as se}from"./maplibre-gl-Ukol7sIV.js";import{L}from"./index-D2w8b1Gc.js";import{createSignal as C,splitProps as ae,sharedConfig as O,onMount as I,createMemo as G,untrack as ne,createEffect as z,Show as T,For as j}from"solid-js";import{C as R,t as ie,s as ce,L as le,R as pe,a as de,N as ue}from"./index-sk3k63l_.js";import*as me from"maplibre-gl";import{u as k}from"./index-DGFWRD0-.js";import he from"@maplibre/maplibre-gl-geocoder";import{I as ge}from"./info-uPCLydNA.js";import{a as ve,b as fe,c as ye}from"./index-vCJlFWMY.js";import{isoParse as be,scaleTime as we,line as $e,scaleLinear as Se,min as xe,max as Ce}from"d3";import _ from"dayjs";import ke from"dayjs/plugin/timezone.js";import Me from"dayjs/plugin/utc.js";import{C as ze}from"./close-CKxkeldA.js";import{b as Pe}from"./backend-hM8sUyp6.js";import{a as V,b as Ae}from"./routing-BfDgGOS4.js";import{c as Fe}from"./createAsync-Dqt8Sub7.js";import{A as qe}from"./components-C2CNEjd6.js";import Le from"minisearch";import{createStore as Te}from"solid-js/store";import{unified as J}from"unified";import Y from"remark-parse";import E from"remark-frontmatter";import K from"remark-parse-frontmatter";import W from"remark-rehype";import X from"rehype-stringify";import _e from"crypto-js/md5.js";function D(e,t={}){if(re)return d=>d.fallback;const[n,i]=C();return!t.lazy&&B(e,i),d=>{let c,o;const[,a]=ae(d,["fallback"]);if(t.lazy&&B(e,i),(c=n())&&!O.context)return c(a);const[v,l]=C(!O.context);return I(()=>l(!0)),G(()=>(c=n(),o=v(),ne(()=>c&&o?c(a):d.fallback)))}}function B(e,t){e().then(n=>t(()=>n.default))}async function Ie(e){const t=new URL("https://api.geocode.earth/v1/autocomplete");return t.search=`?api_key=undefined&layers=coarse&text=${e}`,await(await fetch(t.href)).json()}const Ne=()=>{const[e]=Z();return I(()=>{const t={forwardGeocode:async i=>{try{const c=(await Ie(i.query)).features.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:o.geometry.coordinates},id:`${o.properties.source}.${o.properties.id}`,place_name:o.properties.label,place_type:["place"],text:o.properties.name,center:o.geometry.coordinates}));return{type:"FeatureCollection",query:[i.query],features:c}}catch(d){console.error(`Failed to forwardGeocode with error: ${d}`)}}},n=new he(t,{marker:!1,showResultsWhileTyping:!0,zoom:10,debounceSearch:300});e.map.addControl(n,"top-left")}),[]};var Re=["<div",' class="map-container"><!--$-->','<!--/--><div class="getting-started-link"><!--$-->','<!--/--><a href="/getting-started">Learn how to use the Explorer</a></div></div>'];function He(e){return 2500/(e/5)}function Oe(){const[e]=Z(),[t]=k();return z(()=>{t.bounds.length===4&&e.map.fitBounds([[t.bounds[0],t.bounds[1]],[t.bounds[2],t.bounds[3]]],{padding:{top:90,bottom:150,left:20,right:360}})}),[]}function De(){const[e,{setSelectedLocationsId:t,setViewport:n}]=k();function i(o){const a=o.target.queryRenderedFeatures(o.point),v=a[0].properties.locations_id;return t(v),a[0].geometry.coordinates}const d=()=>!e.showMonitors&&e.showAirSensors?!1:!!(e.showMonitors&&!e.showAirSensors),c=()=>{let o=["all"];if(e.mapParameter!=="all"&&o.push(["==",["get",e.mapParameter],!0]),e.providers.length>0&&o.push(["in",["get","providers_id"],["literal",e.providers]]),e.showOnlyActiveLocations&&o.push(["==",["get","active"],!0]),e.showMonitors&&e.showAirSensors)return o;{const a=d();o.push(["==",["get","ismonitor"],a])}return o};return m(Re,f(),r(s(oe,{class:"map",mapLib:me,get options(){return{accessToken:"pk.eyJ1IjoibWJhZ3JhdGlvbmkiLCJhIjoiY21nYzdvYzRtMWRlaTJrczdhdmFvY3R1ZSJ9.q1gwOrfrGLBRKTef6ylZzQ",style:"https://api.maptiler.com/maps/dataviz-dark/style.json?key=UhseFH2iDqnVh2izRANY",touchZoomRotate:!1,dragRotate:!1,minZoom:1,maxZoom:20,hash:!0,attributionControl:!1}},onMouseOver:{locations:o=>o.target.getCanvas().style.cursor="pointer"},onMouseLeave:{locations:o=>o.target.getCanvas().style.cursor=""},get viewport(){return e.viewport},onViewportChange:o=>n(o),get children(){return[s(R,{type:"scale",position:"bottom-left"}),s(Ne,{}),s(R,{type:"attribution",position:"bottom-right",options:{customAttribution:'Â© <a href="https://geocode.earth">Geocode Earth</a>, Powered by <a href="https://protomaps.com">Protomaps</a>'}}),s(R,{type:"navigation",position:"bottom-left",options:{showCompass:!1,showZoom:!0}}),s(se,{get source(){return{id:"locations",type:"vector",tiles:["https://api.maptiler.com/tiles/streets/{z}/{x}/{y}.pbf?key=UhseFH2iDqnVh2izRANY/{z}/{x}/{y}.pbf?apiKey=UhseFH2iDqnVh2izRANY"],minzoom:1,maxzoom:24,bounds:[-180,-90,180,90]}},get children(){return[s(L,{id:"locations-shadow",get style(){return{type:"circle","source-layer":"locations",paint:{"circle-color":"black","circle-blur":["interpolate",["linear"],["zoom"],1,.75,14,.25],"circle-translate":[0,4],"circle-opacity":["interpolate",["linear"],["zoom"],1,0,14,.5],"circle-radius":["interpolate",["linear"],["zoom"],1,["case",c(),["case",["==",["get","ismonitor"],!0],4,2],0],14,["case",c(),["case",["==",["get","ismonitor"],!0],32,15],0]]}}}}),s(L,{id:"locations",onClick:o=>{const a=i(o);o.target.flyTo({center:a,zoom:o.target.getZoom()>12?o.target.getZoom():12,duration:He(o.target.getZoom()),essential:!0})},get style(){return{type:"circle","source-layer":"locations",paint:{"circle-color":["case",["==",["get","active"],!0],"#6a5cd8","#7e8c9a"],"circle-stroke-color":["case",["==",["get","ismonitor"],!0],"white","grey"],"circle-stroke-width":["interpolate",["linear"],["zoom"],2,["case",c(),["case",["==",["get","ismonitor"],!0],1,.25],0],14,["case",c(),["case",["==",["get","ismonitor"],!0],6,0],0]],"circle-stroke-opacity":["case",c(),1,0],"circle-opacity":["case",c(),1,0],"circle-radius":["interpolate",["linear"],["zoom"],1,["case",c(),["case",["==",["get","ismonitor"],!0],3,2],0],14,["case",c(),["case",["==",["get","ismonitor"],!0],22,13],0]]}}}}),s(L,{id:"selected-location-shadow",get style(){return{type:"circle","source-layer":"locations",filter:["==",["get","locations_id"],["literal",e.locationsId||0]],paint:{"circle-color":"#000000","circle-blur":["interpolate",["linear"],["zoom"],1,.25,14,.35],"circle-opacity":.5,"circle-radius":["interpolate",["linear"],["zoom"],1,["case",["==",["get","ismonitor"],!0],5,4],14,["case",["==",["get","ismonitor"],!0],25,17]]}}}}),s(L,{id:"selected-location",get style(){return{type:"circle","source-layer":"locations",filter:["==",["get","locations_id"],["literal",e.locationsId||0]],paint:{"circle-color":["case",["==",["get","active"],!0],"#6a5cd8","#7e8c9a"],"circle-opacity":1,"circle-radius":["interpolate",["linear"],["zoom"],1,["case",["==",["get","ismonitor"],!0],3,2],14,["case",["==",["get","ismonitor"],!0],22,13]],"circle-stroke-width":["interpolate",["linear"],["zoom"],2,["case",["==",["get","ismonitor"],!0],2,1],14,["case",["==",["get","ismonitor"],!0],6,4]],"circle-stroke-color":"#85DBD9"}}}})]}}),s(Oe,{})]}})),r(s(ge,{viewBox:"0 0 25 25",role:"img","aria-label":"Info Icon",class:"info-icon"})))}function Q(e){return e.map(t=>({value:parseFloat(t.value),date:be(t.date)}))}var Be=["<svg",' width="','" height="','"><g transform="','"><path style="','"',"></path></g></svg>"];_.extend(Me);_.extend(ke);function Qe(e){const[t,n]=C(Q(e.series)),i=_(new Date,e.timezone).toDate(),d=_(new Date().getTime()-864e5,e.timezone).toDate(),c=we().range([0,e.width]);c.domain([d,i]);const o=()=>{const l=Se().range([e.height,0]);return l.domain([xe(t(),b=>b.value),Ce(t(),b=>b.value)]),l};let a=o();const v=$e().x(l=>c(l.date)).y(l=>a(l.value));return z(()=>{n(Q(e.series)),a=o()}),m(Be,f(),`${r(e.width,!0)+r(e.margin.left,!0)+r(e.margin.right,!0)}px`,`${r(e.height,!0)+r(e.margin.top,!0)+r(e.margin.bottom,!0)}px`,`translate(${r(e.margin.left,!0)} ${r(e.margin.top,!0)})`,N("fill:",r(e.style.fill,!0))+N(";stroke:",r(e.style.color,!0))+N(";stroke-width:",r(e.style.width,!0)),w("d",r(v(t()),!0),!1))}var Ue='<path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240z"></path>';const Ze=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(Ue),!0);var Ge=["<div",' class="','"><header class="location-detail-card__header"><div><h3 class="type-heading-3 text-white">','</h3></div><div><button class="close-btn"> <!--$-->','<!--/--></button></div></header><div class="location-detail-card__body"><section class="section"><span class="type-body-3">','</span></section><section class="section-grid"><span class="type-subtitle-3">Type</span><span class="type-body-1">','</span><span class="type-subtitle-3">Measures</span><span class="type-body-1">','</span></section><section class="section-grid"><span class="type-subtitle-3">Source</span><span class="type-body-1">','</span><span class="type-subtitle-3">Reporting</span><div class="reporting-cell"><span class="type-body-1">','</span><span class="type-body-4">','</span></div></section><section class="recent-measurements"><span class="type-subtitle-3">Latest Readings </span><span class="type-body-1">(last 24 hours) </span><!--$-->','<!--/--></section></div><footer class="location-detail-card__footer"><!--$-->',"<!--/--><!--$-->","<!--/--></footer></div>"],je=["<span",' class="type-subtitle-3">',"</span>"],Ve=["<span",' class="type-body-1">Loading...</span>'],Je=["<span",' class="type-body-1">No recent measurements</span>'];function Ye(){const e=Fe(()=>Pe()),t=V(),n={width:24,height:24,fill:"#FFFFFF"},[i,{clearLocationsId:d,setRecentMeasurements:c,updateRecentMeasurements:o}]=k(),[a,v]=C();return z(async()=>{if(i.locationsId){v(await ve(i.locationsId));const l=a().results[0].sensors;c([]);const b=l.map(h=>{const[S,A]=C([]),[F,M]=C(!0);return{parameter:`${h.parameter.displayName} ${h.parameter.units}`,loading:F,setLoading:M,series:S,setSeries:A}});c(b);for(const h of l){const S=await fe(h,a().results[0].timezone);o(`${h.parameter.displayName} ${h.parameter.units}`,S)}}}),m(Ge,f(),`location-detail-card ${i.locationsId?"":"location-detail-card--translate"}`,r(a()?.results?.[0].name?.slice(0,20))||"No label",r(s(ze,n)),r(a()?.results?.[0].country.name),a()?.results?.[0].isMonitor?"Reference grade":"Air sensor",r(a()?.results?.[0].sensors.map(l=>`${l.parameter.displayName} ${l.parameter.units}`).join(", ")),r(a()?.results?.[0].provider.name),a()?.results?.[0].datetimeLast?`Updated ${r(ie(a()?.results?.[0].datetimeLast?.local))}`:"No measurements",a()?.results?.[0].datetimeFirst?`Reporting since ${r(ce(a()?.results?.[0].datetimeFirst?.local))}`:"No measurements",r(s(T,{get when(){return i.recentMeasurements&&a()},get children(){return s(j,{get each(){return i.recentMeasurements},children:(l,b)=>[m(je,f(),r(l.parameter)),l.series().length?s(Qe,{get series(){return l.series()},get timezone(){return a()?.timezone},width:78,height:14,margin:{top:1,right:1,bottom:1,left:1},style:{color:"#5d48f4",width:"3",fill:"none"}}):l.loading()?m(Ve,f()):m(Je,f())]})}})),r(s(T,{get when(){return e()?.usersId},get children(){return s(le,{get redirect(){return t.pathname}})}})),r(s(qe,{get href(){return`/locations/${i.locationsId}`},class:"icon-btn btn-primary",get children(){return["Show Details ",s(Ze,n)]}})))}var Ee='<path d="M400-240 160-480l240-240 56 58-142 142h486v80H314l142 142z"></path>';const Ke=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(Ee),!0);var We='<path d="M200-120q-33 0-56.5-23.5T120-200v-160h80v160h160v80zm400 0v-80h160v-160h80v160q0 33-23.5 56.5T760-120zM120-600v-160q0-33 23.5-56.5T200-840h160v80H200v160zm640 0v-160H600v-80h160q33 0 56.5 23.5T840-760v160z"></path>';const Xe=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(We),!0);var et=["<button",' class="button-reset zoom-to-provider-btn"><span>Zoom to provider extent </span><!--$-->',"<!--/--></button>"],tt=["<div",' class="providers-card"><header class="providers-card__header"><!--$-->','<!--/--><h3 class="type-heading-3 text-white">Data providers</h3></header><div class="providers-card__body"><div class="list-header"><div class="select-helpers"><button class="button-reset type-link-1 providers-list-select-all">Select All</button><span>|</span><button class="button-reset type-link-1 providers-list-select-none">Select None</button></div><span><!--$-->',"<!--/--> of <!--$-->","<!--/--> providers selected</span><!--$-->",'<!--/--><input type="text" name="search-input" id="search-input" class="search-input"><span>','</span></div><div class="list-container"><ul class="providers-list">','</ul></div></div><footer class="providers-card__footer"><button class="','"',">Update</button></footer></div>"],rt=["<li",' class="providers-list-item"><label for="','" class="type-body-1 text-smoke-120">','</label><input type="checkbox" name="','" id="','"',"",' class="checkbox"></li>'];function ot(){const[e,{toggleShowProvidersCard:t,setViewport:n,setProviders:i,setTotalProviders:d,setBounds:c,setMapBbox:o}]=k(),[a,v]=C(),[l,b]=Te([]),[h,S]=C([]),A=()=>{t()},F=new Le({fields:["name"],storeFields:["name"]}),M={width:24,height:24};return I(async()=>{const p=(await ye()).results;v(p.length),d(p.length),b(p.map(x=>({name:x.name,id:x.id,checked:e.providers.length===0?"true":e.providers.includes(x.id),matchesQuery:!0,bbox:x.bbox})).sort((x,g)=>x.name.toLowerCase<g.name.toLowerCase?-1:1)),F.addAll(l)}),z(()=>{S(l.filter(u=>u.checked))}),m(tt,f(),r(s(Ke,y({fill:"#FFFFFF"},M,{onClick:()=>A()}))),r(h().length),`${r(a())}`,r(s(T,{get when(){return h().length!=a()&&h().length!=0},get children(){return m(et,f(),r(s(Xe,y({fill:"#5a6672"},M))))}})),l.filter(u=>u.matchesQuery).length==a()?`Listing all ${r(a())} providers`:`Listing ${r(l.filter(u=>u.matchesQuery).length)} of ${r(a())} providers`,r(s(j,{get each(){return l.filter(u=>u.matchesQuery)},children:(u,p)=>{if(u.matchesQuery)return m(rt,f(),`${r(u.name,!0)}-checkbox`,r(u.name),`${r(u.name,!0)}-checkbox`,`${r(u.name,!0)}-checkbox`,w("value",r(u.id,!0),!1),w("checked",u.checked,!0))}})),`btn btn-primary ${h().length>0?"":"btn-primary--disabled"}`,w("disabled",h().length===0,!0))}var st='<path d="M440-160q-17 0-28.5-11.5T400-200v-240L168-736q-15-20-4.5-42t36.5-22h560q26 0 36.5 22t-4.5 42L560-440v240q0 17-11.5 28.5T520-160zm40-308 198-252H282zm0 0"></path>';const at=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(st),!0);var nt='<path d="M440-120v-240h80v80h320v80H520v80zm-320-80v-80h240v80zm160-160v-80H120v-80h160v-80h80v240zm160-80v-80h400v80zm160-160v-240h80v80h160v80H680v80zm-480-80v-80h400v80z"></path>';const it=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(nt),!0);var ct='<path d="M478-240q21 0 35.5-14.5T528-290t-14.5-35.5T478-340t-35.5 14.5T428-290t14.5 35.5T478-240m-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-12 37.5T506-526q-44 39-54 59t-10 73m38 314q-83 0-156-31.5T197-197t-85.5-127T80-480t31.5-156T197-763t127-85.5T480-880t156 31.5T763-763t85.5 127T880-480t-31.5 156T763-197t-127 85.5T480-80m0-80q134 0 227-93t93-227-93-227-227-93-227 93-93 227 93 227 227 93m0-320"></path>';const lt=(e={})=>P("svg",y({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 -960 960 960"},e),()=>m(ct),!0),pt={width:24,height:24},dt=({content:e,title:t})=>{const[n,{toggleShowHelpCard:i,setHelpContent:d}]=k(),c=o=>{i(!0),d(e),o.stopPropagation()};return s(lt,y(pt,{fill:"#000000",class:`${t} help-icon`,onClick:o=>c(o)}))},ut=`---\r
title: 'pollutants'\r
---\r
\r
### Pollutants\r
\r
The OpenAQ database currently ingests the following pollutant data, with a focus on those in **bold**.\r
\r
- PM<sub>1</sub> - particulate matter 1 microns (Î¼m)\r
- **PM<sub>2.5</sub> - particulate matter 2.5 microns (Î¼m)**\r
- PM<sub>4</sub> - particulate matter 4 microns (Î¼m)\r
- **PM<sub>10</sub> - particulate matter 10 microns (Î¼m)**\r
- **BC - black carbon particulates, part of PM2.5**\r
- **Oâ - Ozone gas**\r
- **CO - Carbon monoxide gas**\r
- **NOâ - Nitrogen dioxide gas**\r
- NO - Nitrogen monoxide gas\r
- NO<sub>x</sub> - Nitrogen oxides\r
- **SOâ - Sulfur dioxide gas**\r
- CHâ - Methane gas\r
- COâ - Carbon dioxide gas\r
\r
### Units of measurement\r
\r
Measurements of pollutants are reported in a variety of units depending on how the data is reported from the original data provider. The most common units found in the dataset are:\r
\r
- ppb (parts per million)\r
- Âµg/mÂ³ (micrograms per cubic meter)\r
\r
Units are not normalized in the OpenAQ system, with the exception of converting ppb (parts per billion) to ppm (parts per million). Volume units are not converted to mass units, nor vice versa; they are served as originally reported.\r
`,mt=e=>{const{data:{frontmatter:t},value:n}=J().use(Y).use(E,["yaml"]).use(K).use(W).use(X).processSync(e),i=t;return{notificationContent:String(n),notificationTitle:i?.title,notificationType:i?.type}},ht=e=>{const{data:{frontmatter:t},value:n}=J().use(Y).use(E,["yaml"]).use(K).use(W).use(X).processSync(e),i=t;return{helpContent:String(n),helpTitle:i?.title}};var gt=["<div",' class="overlay-card"><section class="filter-section"><header class="filter-section__header"><div class="card-title"><!--$-->','<!--/--><h3>Filters</h3></div></header><div class="pollutant-select"><div class="pollutant-label-wrapper"><label for="parameter-select" class="type-subtitle-2">Choose a pollutant </label><span>','</span></div><select class="select" name="parameter-select" id="parameter-select"','><option value="all">Any pollutant</option><option value="pm25">PM&#8322;&#8325;</option><option value="pm10">PM&#8321;&#8320;</option><option value="o3">O&#8323;</option><option value="no2">NO&#8322;</option><option value="so2">SO&#8322;</option><option value="co">CO</option></select></div><hr class="hr"><div><span class="type-subtitle-2">Choose location type</span><div class="filter-section__body"><!--$-->','<!--/--><label class="marker-legend-item" for="reference-grade"><span>Reference monitor locations</span><input type="checkbox" name="reference-grade" id="reference-grade" class="checkbox"',"","></label><!--$-->",'<!--/--><label class="marker-legend-item" for="low-cost-sensor">Air sensors locations<input type="checkbox" name="low-cost-sensor" id="low-cost-sensor" class="checkbox"',"","></label><!--$-->",'<!--/--><label class="marker-legend-item" for="no-recent-updates">Show locations with no recent updates<input type="checkbox" name="no-recent-updates" id="no-recent-updates" class="checkbox"','></label></div></div></section><footer class="overlay-card__footer"><span class="type-body-1">Showing data from <!--$-->','<!--/--></span><button class="icon-btn btn-secondary">Choose data providers <!--$-->',"<!--/--></button></footer></div>"];const ee=ht(ut),vt=ee.helpContent,ft=ee.helpTitle;function yt(){const[e,{toggleShowProvidersCard:t,setSelectedMapParameter:n,toggleMapIsActive:i,toggleAirSensor:d,toggleMonitor:c}]=k(),o={width:24,height:24};return m(gt,f(),r(s(at,y(o,{fill:"#FFFFFF"}))),r(s(dt,{content:vt,title:ft})),w("value",r(e.mapParameter.toString(),!0),!1),r(s(pe,{})),w("checked",e.showMonitors,!0),w("disabled",!e.showAirSensors,!0),r(s(de,{})),w("checked",e.showAirSensors,!0),w("disabled",!e.showMonitors,!0),r(s(ue,{})),w("checked",!e.showOnlyActiveLocations,!0),e.providers.length==0?"all providers":e.providers.length==1?"1 provider":`${r(e.providers.length)} providers`,r(s(it,y(o,{fill:"#33a3a1"}))))}var bt=["<div",' class="','"><div class="flip-card-inner"><div class="flip-card-front">','</div><div class="flip-card-back">',"</div></div></div>"];function wt(){const[e]=k();return m(bt,f(),`flip-card ${e.showProvidersCard?"flip-card--active":""} ${e.locationsId||e.showHelpCard?"flip-card--translate":""}`,r(s(yt,{})),r(s(ot,{})))}const U=`---\r
title: 'Registration issues'\r
type: 'warning'\r
---\r
\r
The OpenAQ Explorer is currently experiencing issues with new account\r
registration. Existing accounts can login as usual. If you need to register for\r
an accout please try again later.\r
`;function Jt(){const e=JSON.parse(!1),[t,n]=k(),i=D(()=>import("./NotificationCard-D17mnV_-.js")),d=D(()=>import("./HelpCard-isHD4afO.js")),o=`${_e(U).toString()}-notificationDismissed`,a=mt(U),v=a.notificationType,l=a.notificationTitle,b=a.notificationContent;z(()=>{const g=localStorage.getItem(o)==="true";e&&!g&&n.toggleShowNotificationCard(!0),(g||!e)&&n.toggleShowNotificationCard(!1)});const h=n.setSelectedLocationsId,S=n.setSelectedMapParameter,A=n.setProviders,F=n.toggleMapIsActive,M=n.toggleMonitor,u=n.toggleAirSensor,p=V(),x=Ae();return I(()=>{if(p.query.location&&h(Number(p.query.location)),p.query?.parameter&&(Array.isArray(p.query.parameter)&&p.query.parameter.length===0?S(p.query.parameter[0]):typeof p.query.parameter=="string"&&S(p.query.parameter)),p.query?.active){const g=p.query.active==="true";t.showOnlyActiveLocations!==g&&F()}if(p.query?.sensors){const g=p.query.sensors==="true";t.showAirSensors!==g&&u()}if(p.query?.monitors){const g=p.query.monitors==="true";t.showMonitors!==g&&M()}if(p.query?.provider){const q=new URLSearchParams(p.search).get("provider")?.split(",").map($=>Number($));q&&A(q)}}),z(()=>{const q=G(()=>t.providers)(),$=new URLSearchParams;t.locationsId!==void 0&&$.append("location",t.locationsId.toString()),t.mapParameter!=="all"&&$.append("parameter",t.mapParameter.toString()),q.length>0&&$.append("provider",t.providers.join(",")),t.showOnlyActiveLocations==!1&&$.append("active",t.showOnlyActiveLocations.toString()),t.showMonitors==!1&&$.append("monitors",t.showMonitors.toString()),t.showAirSensors==!1&&$.append("sensors",t.showAirSensors.toString());const H=$.toString(),te=H?`${p.pathname}?${H}${p.hash}`:`${p.pathname}${p.hash}`;x(te)}),[s(T,{get when(){return e&&t.showNotificationCard},get children(){return s(i,{notificationType:v,notificationTitle:l,notificationContent:b,dismissedKey:o})}}),s(d,{get content(){return t.helpContent},title:"Help"}),s(De,{}),s(wt,{}),s(Ye,{})]}export{Jt as H,Ze as R};
