import{k as o,n as f,q as _}from"./backend-DPj8aydh.js";import d from"dayjs";import x from"dayjs/plugin/timezone.js";import A from"dayjs/plugin/utc.js";import{b as S}from"./lists-D96-zvNg.js";function i(e){return e.GET}d.extend(A);d.extend(x);const b=o(async function(s){const n=new URL("https://api.openaq.org");return n.pathname=`/v3/locations/${s}`,await(await fetch(n.href,{headers:{"Content-Type":"application/json","X-API-Key":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}})).json()},"src_client_index_tsx--fetchLocation_1","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),h=b,g=o(async function(e,s,n,r){const t=new URL("https://api.openaq.org");t.pathname=`/v3/sensors/${e}/measurements`,t.search=`?datetime_from=${s.replace(" ","%2b")}&datetime_to=${n.replace(" ","%2b")}&limit=${r}`,console.info(`fetching ${t.href}`);const a=await fetch(t.href,{headers:{"Content-Type":"application/json","X-API-Key":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}});if(a.status!==200)throw console.error(`${t.href} failed with HTTP ${a.status}`),new Error("failed to fetch");return(await a.json()).results},"src_client_index_tsx--fetchSensorMeasurementsDownload_1","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),M=g,v=o(async function(e,s,n,r){const t=new URL("https://api.openaq.org");t.pathname=`/v3/sensors/${e}/hours`,t.search=`?datetime_from=${s.replace(" ","%2b")}&datetime_to=${n.replace(" ","%2b")}&limit=${r}`,console.info(`fetching ${t.href}`);const a=await fetch(t.href,{headers:{"Content-Type":"application/json","X-API-Key":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}});if(a.status!==200)throw console.error(`${t.href} failed with HTTP ${a.status}`),new Error("failed to fetch");return(await a.json()).results},"src_client_index_tsx--fetchSensorMeasurements_1","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),u=v,w=o(async function(e,s,n,r){const t=new URL("https://api.openaq.org");return t.pathname=`/v3/sensors/${e}/hours/${s}`,t.search=`?datetime_from=${n.replace(" ","%2b")}&datetime_to=${r.replace(" ","%2b")}`,console.info(`fetching ${t.href}`),(await(await fetch(t.href,{headers:{"Content-Type":"application/json","X-API-Key":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}})).json()).results},"src_client_index_tsx--fetchSensorTrends_1","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),T=w,y=o(async function(){const e=new URL("https://api.openaq.org");return e.pathname="/v3/providers",e.search="limit=1000",await(await fetch(e.href,{headers:{"Content-Type":"application/json","X-API-Key":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}})).json()},"src_client_index_tsx--fetchProviders_1","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),$=y,L=o(async(e,s,n,r=1e3)=>{const t=await u(e,s,n,r);return f(t,{headers:{"cache-control":"max-age=60"}})},"src_client_index_tsx--getSensorMeasurements_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),X=i(L),I=o(async(e,s,n,r=1e3)=>{const t=await M(e,s,n,r);return f(t,{headers:{"cache-control":"max-age=60"}})},"src_client_index_tsx--getSensorMeasurementsDownload_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server=");i(I);const R=o(async(e,s)=>{const n=d(new Date,s).toISOString(),r=d(new Date().getTime()-864e5,s).toISOString(),a=(await u(e.id,r,n,24)).map(c=>({date:c.period.datetimeTo.local,value:c.value}));return f({parameter:`${e.parameter.displayName} ${e.parameter.units}`,series:a},{headers:{"cache-control":"max-age=3600"}})},"src_client_index_tsx--getSensorRecentMeasurements_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),O=i(R),D=o(async e=>{const s=await h(e),n=s.results[0].sensors,r=[],t=d(new Date,s.timezone).toISOString(),a=d(new Date().getTime()-864e5,s.timezone).toISOString();for(const c of n){const l=(await u(c.id,a,t,24)).map(p=>({date:p.period.datetimeTo.local,value:p.value}));r.push({parameter:c.parameter.displayName,series:l})}return r},"src_client_index_tsx--getLocationRecentMeasurements_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server=");i(D);const C=o(async(e,s,n,r)=>{const t=await T(e,s,n,r);return f(t,{headers:{"cache-control":"max-age=86400"}})},"src_client_index_tsx--getSensorTrends_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),N=i(C),E=o(async e=>{const s=await h(e);return f(s,{headers:{"cache-control":"max-age=60"}})},"src_client_index_tsx--getLocation_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),z=i(E),U=o(async()=>{const e=await $();return f(e,{headers:{"cache-control":"max-age=86400"}})},"src_client_index_tsx--getProviders_GET","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),H=i(U),G=o(async e=>{const s=await S(e);if(!s||!s.licenses)return console.error(`No licenses found for location ID: ${e}`),[];const n=s.licenses.map(l=>l.id),r=new URL("https://api.openaq.org");return r.pathname="/v3/licenses",(await(await fetch(r.href,{headers:{"Content-Type":"application/json","X-API-KEY":"be79fbc7b35789af970752f816b8bf9b79a5198ef9157a4c596e27a5bd70fa40"}})).json()).results.filter(l=>n.includes(l.id))},"src_client_index_tsx--getLocationLicenses_query","C:/Users/MARIAM/Desktop/AirSense/AirSense/src/client/index.tsx?tsr-directive-use-server="),B=_(G,"get-location-licenses-action");export{z as a,O as b,H as c,X as d,N as e,B as g};
