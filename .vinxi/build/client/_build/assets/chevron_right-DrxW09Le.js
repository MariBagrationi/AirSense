import{D as Rt,e as Mt,x as nt,u as Bt,f as Gt,i as L,t as F,y as U,B as Z,l as _,b as I,G as K,v as D,A as m,S as J,z as Q,j as Pt,r as Yt}from"./web-BP_Sm2kp.js";import{u as jt}from"./index-Da3s7cXh.js";import{S as xt,r as Nt,f as It,g as Ot,i as Ut,h as Xt,w as qt,j as A,k as Wt,x as Zt,y as Jt,n as Kt,d as Ct,t as Qt,l as pt,m as te,b as yt,o as j,p as ee,q as ne,v as ie,z as re,A as ae,B as le,C as oe}from"./index-By5Xq2HF.js";import{d as R,u as ue}from"./utc-B-W9tmtl.js";import{t as se}from"./index-CVjl_ltI.js";function ce(t,e){let o,c;for(const l of t)l!=null&&(o===void 0?l>=l&&(o=c=l):(o>l&&(o=l),c<l&&(c=l)));return[o,c]}function fe(t){return t}var p=1,tt=2,it=3,X=4,wt=1e-6;function ge(t){return"translate("+t+",0)"}function de(t){return"translate(0,"+t+")"}function me(t){return e=>+t(e)}function ve(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),o=>+t(o)+e}function he(){return!this.__axis}function zt(t,e){var o=[],c=null,l=null,h=6,x=6,w=3,$=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===p||t===X?-1:1,E=t===X||t===tt?"x":"y",i=t===p||t===it?ge:de;function a(u){var H=c??(e.ticks?e.ticks.apply(e,o):e.domain()),d=l??(e.tickFormat?e.tickFormat.apply(e,o):fe),f=Math.max(h,0)+w,g=e.range(),v=+g[0]+$,k=+g[g.length-1]+$,b=(e.bandwidth?ve:me)(e.copy(),$),V=u.selection?u.selection():u,z=V.selectAll(".domain").data([null]),M=V.selectAll(".tick").data(H,e).order(),B=M.exit(),C=M.enter().append("g").attr("class","tick"),N=M.select("line"),G=M.select("text");z=z.merge(z.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(C),N=N.merge(C.append("line").attr("stroke","currentColor").attr(E+"2",s*h)),G=G.merge(C.append("text").attr("fill","currentColor").attr(E,s*f).attr("dy",t===p?"0em":t===it?"0.71em":"0.32em")),u!==V&&(z=z.transition(u),M=M.transition(u),N=N.transition(u),G=G.transition(u),B=B.transition(u).attr("opacity",wt).attr("transform",function(T){return isFinite(T=b(T))?i(T+$):this.getAttribute("transform")}),C.attr("opacity",wt).attr("transform",function(T){var O=this.parentNode.__axis;return i((O&&isFinite(O=O(T))?O:b(T))+$)})),B.remove(),z.attr("d",t===X||t===tt?x?"M"+s*x+","+v+"H"+$+"V"+k+"H"+s*x:"M"+$+","+v+"V"+k:x?"M"+v+","+s*x+"V"+$+"H"+k+"V"+s*x:"M"+v+","+$+"H"+k),M.attr("opacity",1).attr("transform",function(T){return i(b(T)+$)}),N.attr(E+"2",s*h),G.attr(E,s*f).text(d),V.filter(he).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===tt?"start":t===X?"end":"middle"),V.each(function(){this.__axis=b})}return a.scale=function(u){return arguments.length?(e=u,a):e},a.ticks=function(){return o=Array.from(arguments),a},a.tickArguments=function(u){return arguments.length?(o=u==null?[]:Array.from(u),a):o.slice()},a.tickValues=function(u){return arguments.length?(c=u==null?null:Array.from(u),a):c&&c.slice()},a.tickFormat=function(u){return arguments.length?(l=u,a):l},a.tickSize=function(u){return arguments.length?(h=x=+u,a):h},a.tickSizeInner=function(u){return arguments.length?(h=+u,a):h},a.tickSizeOuter=function(u){return arguments.length?(x=+u,a):x},a.tickPadding=function(u){return arguments.length?(w=+u,a):w},a.offset=function(u){return arguments.length?($=+u,a):$},a}function xe(t){return zt(it,t)}function $t(t){return zt(X,t)}function et(t){return typeof t=="string"?new xt([[document.querySelector(t)]],[document.documentElement]):new xt([[t]],Nt)}function St(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bt(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ye(t){var e=1,o=t(St(e),bt(e));return o.constant=function(c){return arguments.length?t(St(e=+c),bt(e)):e},Xt(o)}function At(){var t=ye(It());return t.copy=function(){return Ot(t,At()).constant(t.constant())},Ut.apply(t,arguments)}function we(t,e,o){var c=null,l=A(!0),h=null,x=Wt,w=null,$=qt(s);t=typeof t=="function"?t:t===void 0?Zt:A(+t),e=typeof e=="function"?e:e===void 0?A(0):A(+e),o=typeof o=="function"?o:o===void 0?Jt:A(+o);function s(i){var a,u,H,d=(i=Kt(i)).length,f,g=!1,v,k=new Array(d),b=new Array(d);for(h==null&&(w=x(v=$())),a=0;a<=d;++a){if(!(a<d&&l(f=i[a],a,i))===g)if(g=!g)u=a,w.areaStart(),w.lineStart();else{for(w.lineEnd(),w.lineStart(),H=a-1;H>=u;--H)w.point(k[H],b[H]);w.lineEnd(),w.areaEnd()}g&&(k[a]=+t(f,a,i),b[a]=+e(f,a,i),w.point(c?+c(f,a,i):k[a],o?+o(f,a,i):b[a]))}if(v)return w=null,v+""||null}function E(){return Ct().defined(l).curve(x).context(h)}return s.x=function(i){return arguments.length?(t=typeof i=="function"?i:A(+i),c=null,s):t},s.x0=function(i){return arguments.length?(t=typeof i=="function"?i:A(+i),s):t},s.x1=function(i){return arguments.length?(c=i==null?null:typeof i=="function"?i:A(+i),s):c},s.y=function(i){return arguments.length?(e=typeof i=="function"?i:A(+i),o=null,s):e},s.y0=function(i){return arguments.length?(e=typeof i=="function"?i:A(+i),s):e},s.y1=function(i){return arguments.length?(o=i==null?null:typeof i=="function"?i:A(+i),s):o},s.lineX0=s.lineY0=function(){return E().x(t).y(e)},s.lineY1=function(){return E().x(t).y(o)},s.lineX1=function(){return E().x(c).y(e)},s.defined=function(i){return arguments.length?(l=typeof i=="function"?i:A(!!i),s):l},s.curve=function(i){return arguments.length?(x=i,h!=null&&(w=x(h)),s):x},s.context=function(i){return arguments.length?(i==null?h=w=null:w=x(h=i),s):h},s}const Ue=t=>{const[e]=jt(),[o,c]=Rt(t,["position"]),[l,h]=Mt(null),x=new Map([["navigation",window.MapLib.NavigationControl],["scale",window.MapLib.ScaleControl],["attribution",window.MapLib.AttributionControl],["geolocate",window.MapLib.GeolocateControl],["fullscreen",window.MapLib.FullscreenControl],["logo",window.MapLib.LogoControl],["terrain",window.MapLib.TerrainControl]]);return nt(()=>{Bt(()=>l()&&e.map.hasControl(l())&&e.map.removeControl(l())),h(c.custom||new(x.get(c.type||"navigation"))(c.options))}),nt(()=>{e.map.hasControl(l())&&e.map.removeControl(l()),e.map.addControl(l(),o.position)}),Gt(()=>{e.map.hasControl(l())&&e.map.removeControl(l())}),null};var $e=F("<svg><line stroke=#6A5CD8 stroke-width=1></svg>",!1,!0,!1),Se=F("<svg><circle class=line-chart-point-highlight r=9></svg>",!1,!0,!1),be=F("<svg><rect x=0 y=0 rx=5 ry=5 width=40 height=25 fill=#6A5CD8></svg>",!1,!0,!1),ke=F("<svg><text text-anchor=middle>Loading...</svg>",!1,!0,!1),Me=F("<svg><text text-anchor=middle></svg>",!1,!0,!1),Ce=F("<svg><text x=0 y=0 font-size=12 fill=white></svg>",!1,!0,!1),ze=F("<div><div class=line-chart-tooltip><span class=line-chart-tooltip__value></span> <span class=line-chart-tooltip__unit></span></div><svg><defs><linearGradient id=area-gradient gradientUnits=userSpaceOnUse x1=0% y1=0% x2=0% y2=100%><stop offset=0% stop-color=#d4cdf9 stop-opacity=0.7></stop><stop offset=95% stop-color=white stop-opacity=0.7></stop></linearGradient></defs><filter id=shadow color-interpolation-filters=sRGB><feDropShadow dx=2 dy=2 stdDeviation=0.5 flood-opacity=0.2></feDropShadow></filter><g></g><g class=grid></g><g><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/></g><g class=y-axis></g><g class=x-axis></g><g>"),Ae=F("<svg><path class=line-chart-area></svg>",!1,!0,!1),_e=F("<svg><path class=line-chart-line></svg>",!1,!0,!1),Le=F("<svg><circle class=line-chart-point></svg>",!1,!0,!1);R.extend(ue);R.extend(se);const Fe=j(".%L"),Ee=j(":%S"),Te=j("%H:%M"),De=j("%H:%M"),He=j("%b %d"),Ve=j("%b %d"),Re=j("%B"),Be=j("%Y");function Ge(t,e){return(ee(t)<t?Fe:ne(t)<t?Ee:ie(t)<t?Te:re(t)<t?De:ae(t)<t?le(t)<t?He:Ve:oe(t)<t?Re:Be)(new Date(t.toLocaleString("en-US",{timeZone:e})))}function kt(t,e){let o=[],c;return!t||t.length===0?[[]]:(t.filter(l=>l.value!==null).reduce((l,h,x,w)=>{const $=R(h.period.datetimeTo.local,e);return c===void 0||($-c)/(3600*1e3)===1||(o.push(l),l=[]),l.push(h),x===w.length-1&&l.length>0&&o.push(l),c=$,l},[]),o)}function Xe(t){const[e,o]=Mt({}),c=(d,f,g)=>{const v=Qt().range([0,d]);return v.domain(ce([R(f,t.timezone),R(g,t.timezone)])),v},l=(d,f,g)=>{let v;d=="linear"?v=pt().range([f,0]):v=At().range([f,0]);const k=g==null?0:te(g,z=>z.value),b=k<0?k:0,V=g==null?0:yt(g,()=>yt(g,z=>z.value))*1.2;return v.domain([b,V]),v},h=d=>$t(d).ticks(5),x=(d,f)=>$t(d).tickSize(-f).tickFormat("").ticks(5),w=d=>xe(d).ticks(t.xTicks).tickFormat(f=>Ge(f,t.timezone)),$=(d,f,g)=>d.map(v=>({value:v.value,cx:f(R(v.period.datetimeTo.local,t.timezone)),cy:g(v.value),unit:v.parameter.units,date:R(v.period.datetimeTo.local,t.timezone)})),s=(d,f)=>Ct().x(g=>d(R(g.period.datetimeTo.local,t.timezone))).y(g=>f(g.value)),E=(d,f)=>we().x(g=>d(R(g.period.datetimeTo.local,t.timezone))).y0(t.height).y1(g=>f(g.value));let i,a,u;function H(){if(t.data){const d=c(t.width,t.dateFrom,t.dateTo),f=l(t.scale,t.height,t.data),g=x(f,t.width);et(a).call(w(d)),et(i).call(h(f)),et(u).call(g)}}return nt(()=>H()),(()=>{var d=L(ze),f=d.firstChild,g=f.firstChild,v=g.nextSibling,k=v.nextSibling,b=f.nextSibling,V=b.firstChild,z=V.nextSibling,M=z.nextSibling,B=M.nextSibling,C=B.nextSibling,N=C.firstChild,[G,T]=U(N.nextSibling),O=G.nextSibling,[rt,_t]=U(O.nextSibling),Lt=rt.nextSibling,[at,Ft]=U(Lt.nextSibling),Et=at.nextSibling,[lt,Tt]=U(Et.nextSibling),Dt=lt.nextSibling,[Ht,Vt]=U(Dt.nextSibling),q=C.nextSibling,W=q.nextSibling,ot=W.nextSibling;Z(d,"position","relative"),_(g,()=>e()?.value),_(k,()=>e()?.unit),_(M,I(K,{get each(){return kt(t.data,t.timezone)},children:n=>(()=>{var r=L(Ae);return D(()=>m(r,"d",E(c(t.width,t.dateFrom,t.dateTo),l(t.scale,t.height,t.data))(n))),r})()}));var ut=u;typeof ut=="function"?Q(ut,B):u=B,_(C,I(K,{get each(){return kt(t.data,t.timezone)},children:n=>(()=>{var r=L(_e);return D(()=>m(r,"d",s(c(t.width,t.dateFrom,t.dateTo),l(t.scale,t.height,t.data))(n))),r})()}),G,T),_(C,I(J,{get when(){return e()?.visible},get children(){return[(()=>{var n=L($e);return D(r=>{var y=e()?.x,S=t.height,P=e()?.x,Y=e()?.y;return y!==r.e&&m(n,"x1",r.e=y),S!==r.t&&m(n,"y1",r.t=S),P!==r.a&&m(n,"x2",r.a=P),Y!==r.o&&m(n,"y2",r.o=Y),r},{e:void 0,t:void 0,a:void 0,o:void 0}),n})(),(()=>{var n=L(Se);return D(r=>{var y=e()?.x,S=e()?.y;return y!==r.e&&m(n,"cx",r.e=y),S!==r.t&&m(n,"cy",r.t=S),r},{e:void 0,t:void 0}),n})(),(()=>{var n=L(be);return D(()=>m(n,"transform",`translate(${e()?.x-20},${t.height})`)),n})()]}}),rt,_t),_(C,I(K,{get each(){return $(t.data.filter(n=>n.value!==null)??[],c(t.width,t.dateFrom,t.dateTo),l(t.scale,t.height,t.data))},children:n=>(()=>{var r=L(Le);return r.addEventListener("mouseleave",()=>o({visible:!1})),r.addEventListener("mouseenter",()=>{o({visible:!0,x:n.cx,y:n.cy,value:n.value,unit:n.unit,date:n.date})}),D(y=>{var S=n.cx,P=n.cy,Y=n.cx==e()?.x?5:3;return S!==y.e&&m(r,"cx",y.e=S),P!==y.t&&m(r,"cy",y.t=P),Y!==y.a&&m(r,"r",y.a=Y),y},{e:void 0,t:void 0,a:void 0}),r})()}),at,Ft),_(C,I(J,{get when(){return t.loading},get children(){var n=L(ke);return D(r=>{var y=t.width/2,S=t.height/2;return y!==r.e&&m(n,"x",r.e=y),S!==r.t&&m(n,"y",r.t=S),r},{e:void 0,t:void 0}),n}}),lt,Tt),_(C,I(J,{get when(){return t.data==null||t.data.length===0&&t.loading===!1},get children(){var n=L(Me);return _(n,()=>t.noDataMessage),D(r=>{var y=t.width/2,S=t.height/2;return y!==r.e&&m(n,"x",r.e=y),S!==r.t&&m(n,"y",r.t=S),r},{e:void 0,t:void 0}),n}}),Ht,Vt);var st=i;typeof st=="function"?Q(st,q):i=q;var ct=a;return typeof ct=="function"?Q(ct,W):a=W,_(ot,I(J,{get when(){return e()?.visible},get children(){var n=L(Ce);return _(n,()=>e()?.date.tz(t.timezone).format("HH:mm")),D(()=>m(n,"transform",`translate(${e()?.x-16},${t.height+17})`)),n}})),D(n=>{var r=e()?.visible?"flex":"none",y=`${e()?.x-65}px`,S=`${e()?.y+5}px`,P=`${t.width+t.margin}px`,Y=`${t.height+t.margin}px`,ft=`translate(${t.margin/2} ${t.margin/2})`,gt=`translate(${t.margin/2} ${t.margin/2} )`,dt=`translate(${t.margin/2} ${t.margin/2})`,mt=`translate(${t.margin/2} ${t.margin/2})`,vt=`translate(${t.margin/2} ${t.height+t.margin/2})`,ht=`translate(${t.margin/2} ${t.margin/2})`;return r!==n.e&&Z(f,"display",n.e=r),y!==n.t&&Z(f,"left",n.t=y),S!==n.a&&Z(f,"top",n.a=S),P!==n.o&&m(b,"width",n.o=P),Y!==n.i&&m(b,"height",n.i=Y),ft!==n.n&&m(M,"transform",n.n=ft),gt!==n.s&&m(B,"transform",n.s=gt),dt!==n.h&&m(C,"transform",n.h=dt),mt!==n.r&&m(q,"transform",n.r=mt),vt!==n.d&&m(W,"transform",n.d=vt),ht!==n.l&&m(ot,"transform",n.l=ht),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),d})()}var Pe=F('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 -960 960 960"><path d="M504-480 320-664l56-56 240 240-240 240-56-56z">');const qe=(t={})=>(()=>{var e=L(Pe);return Pt(e,t,!0,!0),Yt(),e})();export{Ue as C,Xe as L,qe as a,$t as b,xe as c,et as s};
