import{e as E,i as $,t as g,l,b as t,S as M,y as u,r as D,h as N,j as te,x as B,z as P,A as T,B as V,v as Y,C as O,k as J,m as U,G as le,w as ie}from"./web-BP_Sm2kp.js";import{u as A}from"./index-ByPGQDE4.js";import{m as se,M as re}from"./maplibre-gl-DPmtbcJ2.js";import{S as ne,L as ae}from"./index-BZu25fEE.js";import{d as j}from"./index-6IXc9U7B.js";import{D as K}from"./delete_forever-DWjdwVLR.js";import{A as oe}from"./components-C5epJ_uZ.js";/* empty css              */import{c as q,d as G,g as ce}from"./lists-CSN-izIX.js";import{C as Q}from"./close-BXxffw09.js";import{e as X}from"./utc-B-W9tmtl.js";import{E as de}from"./warning-CNbI2TVd.js";/* empty css              */import{g as ue}from"./session-Din5jGJq.js";import{g as $e}from"./user-DPU6oxOF.js";import{c as R}from"./createAsync-CxGUhFbC.js";import"./routing-DE3KDVov.js";var ge=g("<div class=list-card-map-container>");function W(e){const n=j(e[0],1,-135,{units:"kilometers"}),a=j(e[2],1,45,{units:"kilometers"});return[...n.geometry.coordinates,...a.geometry.coordinates]}function me(e){const[n]=E({bounds:W(e.bbox)});return(()=>{var a=$(ge);return l(a,t(re,{class:"map",mapLib:se,get options(){return{accessToken:"pk.eyJ1IjoibWJhZ3JhdGlvbmkiLCJhIjoiY21nYzdvYzRtMWRlaTJrczdhdmFvY3R1ZSJ9.q1gwOrfrGLBRKTef6ylZzQ",style:"https://api.maptiler.com/maps/dataviz-dark/style.json?key=UhseFH2iDqnVh2izRANY",touchZoomRotate:!1,dragRotate:!1,interactive:!1}},get viewport(){return n()},get children(){return t(M,{get when(){return e.sensorNodesIds.length>0},get children(){return t(ne,{get source(){return{id:"locations",type:"vector",tiles:["https://api.maptiler.com/tiles/streets/{z}/{x}/{y}.pbf?key=UhseFH2iDqnVh2izRANY/{z}/{x}/{y}.pbf?apiKey=UhseFH2iDqnVh2izRANY"],minzoom:1,maxzoom:24,bounds:W(e.bbox)}},get children(){return t(ae,{id:"locations",get style(){return{type:"circle","source-layer":"locations",paint:{"circle-color":["case",["in",["get","locations_id"],["literal",e.sensorNodesIds]],"#FEE172","transparent"],"circle-stroke-color":["case",["in",["get","locations_id"],["literal",e.sensorNodesIds]],"#33A3A1","transparent"],"circle-stroke-width":["interpolate",["linear"],["zoom"],2,1,14,4],"circle-radius":["interpolate",["linear"],["zoom"],1,3,12,8]}}}})}})}})}})),a})()}var he=g('<div class=list-card__body><div class=list-content><!$><!/><div class=list-info><h1 class="type-heading-1 text-sky-120"></h1><p class=type-body-2></p><p class=type-body-3><!$><!/> Locations</p></div></div><div>'),be=g("<div class=list-card><!$><!/><button class=list-card-delete-btn type=button>");function _e(e){const n={width:24,height:24,fill:"#5a6672"},[a,{setDeleteListsId:r,toggleDeleteListModalOpen:h}]=A();return(()=>{var o=$(be),b=o.firstChild,[_,s]=u(b.nextSibling),p=_.nextSibling;return l(o,t(oe,{get href(){return`/lists/${e.listsId}`},get children(){var f=$(he),c=f.firstChild,L=c.firstChild,[v,F]=u(L.nextSibling),y=v.nextSibling,S=y.firstChild,C=S.nextSibling,w=C.nextSibling,i=w.firstChild,[x,d]=u(i.nextSibling);return x.nextSibling,l(c,t(me,e),v,F),l(S,()=>e.label),l(C,()=>e.description),l(w,()=>e.locationsCount,x,d),f}}),_,s),p.$$click=()=>{r(e.listsId),h()},l(p,t(K,n)),D(),o})()}N(["click"]);var pe=g('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 -960 960 960"><path d=M440-440H200v-80h240v-240h80v240h240v80H520v240h-80z>');const ee=(e={})=>(()=>{var n=$(pe);return te(n,e,!0,!0),D(),n})();var fe=g("<p role=alert id=error-message>"),ve=g('<dialog class=modal><form method=post><header class=modal__header><h2 class=title><!$><!/>New list</h2><button id=close class=close-btn aria-label=close formnovalidate></button></header><div class=modal__body><div class=form-input><input type=hidden name=users-id><label for=list-name>Name</label><div class=form-input><input type=text name=list-name id=list-name-input class=text-input></div><label for=list-description>Description</label><input type=text name=list-description id=list-description-input class=text-input></div></div><footer class=modal__footer><!$><!/><button class="btn btn-secondary"id=cancel aria-label=close formnovalidate autofocus>Cancel</button><button class="btn btn-primary"type=submit autofocus>Create');const Z={width:24,height:24,fill:"#FFFFFF"};function ye(e){const[n,{toggleNewListModalOpen:a}]=A(),r=X(q),h=s=>{a(),s.preventDefault(),s.target.closest("dialog").close()},[o,b]=E();B(()=>{n.newListModalOpen&&o()?.showModal()});const _=()=>{a()};return(()=>{var s=$(ve),p=s.firstChild,f=p.firstChild,c=f.firstChild,L=c.firstChild,[v,F]=u(L.nextSibling);v.nextSibling;var y=c.nextSibling,S=f.nextSibling,C=S.firstChild,w=C.firstChild,i=S.nextSibling,x=i.firstChild,[d,k]=u(x.nextSibling),I=d.nextSibling,m=I.nextSibling;return P(b,s),T(p,"action",q),l(c,t(ee,Z),v,F),y.$$click=h,l(y,t(Q,Z)),l(i,t(M,{get when(){return r.result},get children(){var z=$(fe);return V(z,"color","red"),l(z,()=>r.result.message),z}}),d,k),I.$$click=h,m.$$click=()=>_(),Y(()=>O(w,"value",e.usersId)),D(),s})()}N(["click"]);var xe=g("<p role=alert id=error-message>"),Se=g('<dialog class=modal><form method=post><header class=modal__header><h2 class=title><!$><!/>Delete list</h2><button id=close class=close-btn aria-label=close formnovalidate></button></header><div class=modal__body><p class=type-subtitle-3>Delete Warning</p><p><span class=type-subtitle-4>Warning</span> You are about to delete a list, this cannot be undone. Click Delete if you are sure you want to proceed.</p></div><footer class=modal__footer><!$><!/><button class="btn btn-secondary"id=cancel aria-label=close formnovalidate autofocus>Cancel</button><input type=hidden name=lists-id><button class="btn btn-primary"type=submit autofocus>Delete');function Ce(){const e={width:24,height:24,fill:"#FFFFFF"},[n,a]=E(),[r,{toggleDeleteListModalOpen:h}]=A(),o=X(G),b=s=>{h(),s.preventDefault(),s.target.closest("dialog").close()},_=s=>{s.target.closest("dialog").close(),h()};return B(()=>{r.deleteListModalOpen&&n()?.showModal()}),(()=>{var s=$(Se),p=s.firstChild,f=p.firstChild,c=f.firstChild,L=c.firstChild,[v,F]=u(L.nextSibling);v.nextSibling;var y=c.nextSibling,S=f.nextSibling,C=S.nextSibling,w=C.firstChild,[i,x]=u(w.nextSibling),d=i.nextSibling,k=d.nextSibling,I=k.nextSibling;return P(a,s),T(p,"action",G),l(c,t(K,e),v,F),y.$$click=b,l(y,t(Q,e)),l(C,t(M,{get when(){return o.result},get children(){var m=$(xe);return V(m,"color","red"),l(m,()=>o.result.message),m}}),i,x),d.$$click=b,I.$$click=_,Y(()=>O(k,"value",r.listsId)),D(),s})()}N(["click"]);var we=g("<span class=list-length-alert><!$><!/>Maximum of 5 lists reached."),ke=g("<button>Create new list <!$><!/>"),Le=g('<main class=lists-main><header class=header><div class=title><h1 class="type-display-1 gradient-title">My lists</h1><!$><!/></div><!$><!/></header><ul class=lists-list></ul><!$><!/>'),Fe=g('<span class=type-body-3>You have no lists. Click "Create new list" button above to get started ');function Ze(){const e={width:24,height:24},[n,{toggleNewListModalOpen:a}]=A();R(()=>$e(),{deferStream:!0});const r=R(()=>ce(),{deferStream:!0}),h=R(()=>ue(),{deferStream:!0});return(()=>{var o=$(Le),b=o.firstChild,_=b.firstChild,s=_.firstChild,p=s.nextSibling,[f,c]=u(p.nextSibling),L=_.nextSibling,[v,F]=u(L.nextSibling),y=b.nextSibling,S=y.nextSibling,[C,w]=u(S.nextSibling);return l(_,t(M,{get when(){return U(()=>!!r())()&&r().length===5},get children(){var i=$(we),x=i.firstChild,[d,k]=u(x.nextSibling);return d.nextSibling,l(i,t(de,J(e,{fill:"#f5b945"})),d,k),i}}),f,c),l(b,t(M,{get when(){return r()},get children(){var i=$(ke),x=i.firstChild,d=x.nextSibling,[k,I]=u(d.nextSibling);return i.$$click=()=>a(),l(i,t(ee,J(e,{fill:"#FFFFFF"})),k,I),Y(m=>{var z=`icon-btn btn-primary ${r().length<5?"":"btn-primary--disabled"}`,H=!(r().length<6);return z!==m.e&&ie(i,m.e=z),H!==m.t&&O(i,"disabled",m.t=H),m},{e:void 0,t:void 0}),D(),i}}),v,F),l(y,t(M,{get when(){return r()},get children(){return U(()=>r()?.length===0)()?$(Fe):t(le,{get each(){return r()},children:i=>t(_e,i)})}})),l(o,t(M,{get when(){return h()},get children(){return[t(Ce,{}),t(ye,{get usersId(){return h()?.usersId}})]}}),C,w),o})()}N(["click"]);export{Ze as default};
