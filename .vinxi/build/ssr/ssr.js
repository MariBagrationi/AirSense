import{d as me,g as D,s as te,a as P,b as fe,c as U,e as he,f as ge,h as _,i as Ae,j as we}from"./assets/backend-CgKBry6f.js";import{createComponent as p,isServer as M,getRequestEvent as L,delegateEvents as $e,ssrElement as C,escape as y,mergeProps as Se,ssr as S,renderToString as ye,renderToStream as ke,ssrHydrationKey as k,useAssets as ve,NoHydration as re,Hydration as be,ssrAttribute as x,HydrationScript as Re}from"solid-js/web";import{children as Ee,createMemo as O,getOwner as Ce,untrack as xe,Show as oe,on as Me,createRoot as Le,createSignal as Pe,onCleanup as se,sharedConfig as v,lazy as Ne,createComponent as Ie,Suspense as Te,catchError as De,ErrorBoundary as Ue}from"solid-js";import{provideRequestEvent as Oe}from"solid-js/web/storage";/* empty css                       */import{g as q,r as ne,v as qe}from"./assets/user-DzxqgE1G.js";/* empty css                     */import{g as He,l as Fe,a as _e,b as je,s as We}from"./assets/lists-CQNjCx71.js";/* empty css                           */import{M as Be}from"./assets/index-6hp2qVrc.js";import{g as ze}from"./assets/index-DiILmJmy.js";/* empty css                     *//* empty css                        */import{eventHandler as ie}from"h3";import{S as Ge}from"./assets/index-DGFWRD0-.js";import{c as Ke,a as Je,R as Ve,g as Ye,b as Qe,d as j,e as Xe,s as W,m as Ze,f as et,k as tt,h as rt,n as ot}from"./assets/routing-BPjDSAJ2.js";import{H as ae}from"./assets/HttpStatusCode-DH8IeaZe.js";import"node:async_hooks";import"crypto";import"util";import"nanoid";import"dayjs";import"dayjs/plugin/utc.js";import"@zxcvbn-ts/core";import"@zxcvbn-ts/language-common";import"@zxcvbn-ts/language-en";import"dayjs/plugin/timezone.js";import"solid-js/store";function B(e){return async r=>{const t=D(r),s=await e(t);s&&await te(r,s)}}function z(e){return async(r,t)=>{const s=D(r),o=await e(s,t);o&&await te(r,o)}}function st({onRequest:e,onBeforeResponse:r}){return me({onRequest:typeof e=="function"?B(e):Array.isArray(e)?e.map(B):void 0,onBeforeResponse:typeof r=="function"?z(r):Array.isArray(r)?r.map(z):void 0})}function N(e){try{return new URL(e)?.host||null}catch{return null}}function nt(e,r){if(!e||r.length===0)return!1;const t=N(e);if(!t)return!1;for(const s of r){let o;if(s.startsWith("http://")||s.startsWith("https://")?o=N(s):o=N("https://"+s),t===o)return!0}return!1}function it(e){if(e.request.method!=="GET"){const r=(P(e.nativeEvent,"Origin")||P(e.nativeEvent,"Referrer"))??null,t=P(e.nativeEvent,"Host")??null;if(!r||!t||!nt(r,[t]))throw console.info(`Invalid origin request: ${r} ${t}`),new Error("Invalid origin")}}const at=async e=>{try{it(e)}catch{e.nativeEvent.respondWith(new Response(null,{status:403}));return}},G=st({onRequest:[at]}),b={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function ct(e={}){const r={options:e,rootNode:ce(),staticRoutesMap:{}},t=s=>e.strictTrailingSlash?s:s.replace(/\/$/,"")||"/";if(e.routes)for(const s in e.routes)K(r,t(s),e.routes[s]);return{ctx:r,lookup:s=>lt(r,t(s)),insert:(s,o)=>K(r,t(s),o),remove:s=>ut(r,t(s))}}function lt(e,r){const t=e.staticRoutesMap[r];if(t)return t.data;const s=r.split("/"),o={};let n=!1,a=null,i=e.rootNode,l=null;for(let c=0;c<s.length;c++){const f=s[c];i.wildcardChildNode!==null&&(a=i.wildcardChildNode,l=s.slice(c).join("/"));const w=i.children.get(f);if(w===void 0){if(i&&i.placeholderChildren.length>1){const $=s.length-c;i=i.placeholderChildren.find(h=>h.maxDepth===$)||null}else i=i.placeholderChildren[0]||null;if(!i)break;i.paramName&&(o[i.paramName]=f),n=!0}else i=w}return(i===null||i.data===null)&&a!==null&&(i=a,o[i.paramName||"_"]=l,n=!0),i?n?{...i.data,params:n?o:void 0}:i.data:null}function K(e,r,t){let s=!0;const o=r.split("/");let n=e.rootNode,a=0;const i=[n];for(const l of o){let c;if(c=n.children.get(l))n=c;else{const f=dt(l);c=ce({type:f,parent:n}),n.children.set(l,c),f===b.PLACEHOLDER?(c.paramName=l==="*"?`_${a++}`:l.slice(1),n.placeholderChildren.push(c),s=!1):f===b.WILDCARD&&(n.wildcardChildNode=c,c.paramName=l.slice(3)||"_",s=!1),i.push(c),n=c}}for(const[l,c]of i.entries())c.maxDepth=Math.max(i.length-l,c.maxDepth||0);return n.data=t,s===!0&&(e.staticRoutesMap[r]=n),n}function ut(e,r){let t=!1;const s=r.split("/");let o=e.rootNode;for(const n of s)if(o=o.children.get(n),!o)return t;if(o.data){const n=s.at(-1)||"";o.data=null,Object.keys(o.children).length===0&&o.parent&&(o.parent.children.delete(n),o.parent.wildcardChildNode=null,o.parent.placeholderChildren=[]),t=!0}return t}function ce(e={}){return{type:e.type||b.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function dt(e){return e.startsWith("**")?b.WILDCARD:e[0]===":"||e==="*"?b.PLACEHOLDER:b.NORMAL}const le=e=>r=>{const{base:t}=r,s=Ee(()=>r.children),o=O(()=>Ke(s(),r.base||""));let n;const a=Je(e,o,()=>n,{base:t,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return e.create&&e.create(a),p(Ve.Provider,{value:a,get children(){return p(pt,{routerState:a,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(n=Ce())&&null,p(mt,{routerState:a,get branches(){return o()}})]}})}})};function pt(e){const r=e.routerState.location,t=e.routerState.params,s=O(()=>e.preload&&xe(()=>{W(!0),e.preload({params:t,location:r,intent:Ye()||"initial"}),W(!1)}));return p(oe,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>p(o,{params:t,location:r,get data(){return s()},get children(){return e.children}})})}function mt(e){if(M){const o=L();if(o&&o.router&&o.router.dataOnly){ft(o,e.routerState,e.branches);return}o&&((o.router||(o.router={})).matches||(o.router.matches=e.routerState.matches().map(({route:n,path:a,params:i})=>({path:n.originalPath,pattern:n.pattern,match:a,params:i,info:n.info}))))}const r=[];let t;const s=O(Me(e.routerState.matches,(o,n,a)=>{let i=n&&o.length===n.length;const l=[];for(let c=0,f=o.length;c<f;c++){const w=n&&n[c],$=o[c];a&&w&&$.route.key===w.route.key?l[c]=a[c]:(i=!1,r[c]&&r[c](),Le(h=>{r[c]=h,l[c]=Qe(e.routerState,l[c-1]||e.routerState.base,J(()=>s()[c+1]),()=>e.routerState.matches()[c])}))}return r.splice(o.length).forEach(c=>c()),a&&i?a:(t=l[0],l)}));return J(()=>s()&&t)()}const J=e=>()=>p(oe,{get when(){return e()},keyed:!0,children:r=>p(Xe.Provider,{value:r,get children(){return r.outlet()}})});function ft(e,r,t){const s=new URL(e.request.url),o=j(t,new URL(e.router.previousUrl||e.request.url).pathname),n=j(t,s.pathname);for(let a=0;a<n.length;a++){(!o[a]||n[a].route!==o[a].route)&&(e.router.dataOnly=!0);const{route:i,params:l}=n[a];i.preload&&i.preload({params:l,location:r.location,intent:"preload"})}}function ht([e,r],t,s){return[e,s?o=>r(s(o)):r]}function gt(e){let r=!1;const t=o=>typeof o=="string"?{value:o}:o,s=ht(Pe(t(e.get()),{equals:(o,n)=>o.value===n.value&&o.state===n.state}),void 0,o=>(!r&&e.set(o),v.registry&&!v.done&&(v.done=!0),o));return e.init&&se(e.init((o=e.get())=>{r=!0,s[1](t(o)),r=!1})),le({signal:s,create:e.create,utils:e.utils})}function At(e,r,t){return e.addEventListener(r,t),()=>e.removeEventListener(r,t)}function wt(e,r){const t=e&&document.getElementById(e);t?t.scrollIntoView():r&&window.scrollTo(0,0)}function $t(e){const r=new URL(e);return r.pathname+r.search}function St(e){let r;const t={value:e.url||(r=L())&&$t(r.request.url)||""};return le({signal:[()=>t,s=>Object.assign(t,s)]})(e)}function yt(e=!0,r=!1,t="/_server",s){return o=>{const n=o.base.path(),a=o.navigatorFactory(o.base);let i,l;function c(u){return u.namespaceURI==="http://www.w3.org/2000/svg"}function f(u){if(u.defaultPrevented||u.button!==0||u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)return;const d=u.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!d||r&&!d.hasAttribute("link"))return;const g=c(d),m=g?d.href.baseVal:d.href;if((g?d.target.baseVal:d.target)||!m&&!d.hasAttribute("state"))return;const R=(d.getAttribute("rel")||"").split(/\s+/);if(d.hasAttribute("download")||R&&R.includes("external"))return;const E=g?new URL(m,document.baseURI):new URL(m);if(!(E.origin!==window.location.origin||n&&E.pathname&&!E.pathname.toLowerCase().startsWith(n.toLowerCase())))return[d,E]}function w(u){const d=f(u);if(!d)return;const[g,m]=d,H=o.parsePath(m.pathname+m.search+m.hash),R=g.getAttribute("state");u.preventDefault(),a(H,{resolve:!1,replace:g.hasAttribute("replace"),scroll:!g.hasAttribute("noscroll"),state:R?JSON.parse(R):void 0})}function $(u){const d=f(u);if(!d)return;const[g,m]=d;s&&(m.pathname=s(m.pathname)),o.preloadRoute(m,g.getAttribute("preload")!=="false")}function h(u){clearTimeout(i);const d=f(u);if(!d)return l=null;const[g,m]=d;l!==g&&(s&&(m.pathname=s(m.pathname)),i=setTimeout(()=>{o.preloadRoute(m,g.getAttribute("preload")!=="false"),l=g},20))}function A(u){if(u.defaultPrevented)return;let d=u.submitter&&u.submitter.hasAttribute("formaction")?u.submitter.getAttribute("formaction"):u.target.getAttribute("action");if(!d)return;if(!d.startsWith("https://action/")){const m=new URL(d,Ze);if(d=o.parsePath(m.pathname+m.search),!d.startsWith(t))return}if(u.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const g=fe.get(d);if(g){u.preventDefault();const m=new FormData(u.target,u.submitter);g.call({r:o,f:u.target},u.target.enctype==="multipart/form-data"?m:new URLSearchParams(m))}}$e(["click","submit"]),document.addEventListener("click",w),e&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",$,{passive:!0}),document.addEventListener("touchstart",$,{passive:!0})),document.addEventListener("submit",A),se(()=>{document.removeEventListener("click",w),e&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",$),document.removeEventListener("touchstart",$)),document.removeEventListener("submit",A)})}}function kt(e){if(M)return St(e);const r=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,o=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:o}},t=et();return gt({get:r,set({value:s,replace:o,scroll:n,state:a}){o?window.history.replaceState(tt(a),"",s):window.history.pushState(a,"",s),wt(decodeURIComponent(window.location.hash.slice(1)),n),rt()},init:s=>At(window,"popstate",ot(s,o=>{if(o&&o<0)return!t.confirm(o);{const n=r();return!t.confirm(n.value,{state:n.state})}})),create:yt(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:t}})(e)}const vt={preload:()=>q()},bt={preload:()=>{q(),U(),He()}},Rt={preload:({params:e})=>{q(),Fe(Number(e.id)),_e(Number(e.id))}},Et={preload:({params:e})=>{U(),je(Number(e.id)),We(Number(e.id)),ze(Number(e.id))}},Ct={preload:()=>ne()},xt={load(){ne()}},Mt={preload:({params:e})=>qe(e.code)},Lt={preload:()=>U()},ue=[{page:!0,$component:{src:"src/routes/(root)/account.tsx?pick=default&pick=$css",build:()=>import("./account.js"),import:()=>import("./account.js")},$$route:{require:()=>({route:vt}),src:"src/routes/(root)/account.tsx?pick=route"},path:"/(root)/account",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/account.tsx"},{page:!0,$component:{src:"src/routes/(root)/email-verified.jsx?pick=default&pick=$css",build:()=>import("./email-verified.js"),import:()=>import("./email-verified.js")},path:"/(root)/email-verified",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/email-verified.jsx"},{page:!0,$component:{src:"src/routes/(root)/expired.tsx?pick=default&pick=$css",build:()=>import("./expired.js"),import:()=>import("./expired.js")},path:"/(root)/expired",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/expired.tsx"},{page:!0,$component:{src:"src/routes/(root)/forgot-password.tsx?pick=default&pick=$css",build:()=>import("./forgot-password.js"),import:()=>import("./forgot-password.js")},path:"/(root)/forgot-password",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/forgot-password.tsx"},{page:!0,$component:{src:"src/routes/(root)/getting-started.tsx?pick=default&pick=$css",build:()=>import("./getting-started.js"),import:()=>import("./getting-started.js")},path:"/(root)/getting-started",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/getting-started.tsx"},{page:!0,$component:{src:"src/routes/(root)/index.tsx?pick=default&pick=$css",build:()=>import("./index.js"),import:()=>import("./index.js")},path:"/(root)/",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/index.tsx"},{page:!0,$component:{src:"src/routes/(root)/lists/[...lists].tsx?pick=default&pick=$css",build:()=>import("./_...lists_.js"),import:()=>import("./_...lists_.js")},$$route:{require:()=>({route:bt}),src:"src/routes/(root)/lists/[...lists].tsx?pick=route"},path:"/(root)/lists/*lists",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/lists/[...lists].tsx"},{page:!0,$component:{src:"src/routes/(root)/lists/[id].tsx?pick=default&pick=$css",build:()=>import("./_id_.js"),import:()=>import("./_id_.js")},$$route:{require:()=>({route:Rt}),src:"src/routes/(root)/lists/[id].tsx?pick=route"},path:"/(root)/lists/:id",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/lists/[id].tsx"},{page:!0,$component:{src:"src/routes/(root)/locations/[id].tsx?pick=default&pick=$css",build:()=>import("./_id_2.js"),import:()=>import("./_id_2.js")},$$route:{require:()=>({route:Et}),src:"src/routes/(root)/locations/[id].tsx?pick=route"},path:"/(root)/locations/:id",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/locations/[id].tsx"},{page:!0,$component:{src:"src/routes/(root)/login.tsx?pick=default&pick=$css",build:()=>import("./login.js"),import:()=>import("./login.js")},$$route:{require:()=>({route:Ct}),src:"src/routes/(root)/login.tsx?pick=route"},path:"/(root)/login",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/login.tsx"},{page:!0,$component:{src:"src/routes/(root)/new-password.tsx?pick=default&pick=$css",build:()=>import("./new-password.js"),import:()=>import("./new-password.js")},path:"/(root)/new-password",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/new-password.tsx"},{page:!0,$component:{src:"src/routes/(root)/password-email.tsx?pick=default&pick=$css",build:()=>import("./password-email.js"),import:()=>import("./password-email.js")},path:"/(root)/password-email",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/password-email.tsx"},{page:!0,$component:{src:"src/routes/(root)/register.tsx?pick=default&pick=$css",build:()=>import("./register.js"),import:()=>import("./register.js")},$$route:{require:()=>({route:xt}),src:"src/routes/(root)/register.tsx?pick=route"},path:"/(root)/register",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/register.tsx"},{page:!0,$component:{src:"src/routes/(root)/verify/[code].tsx?pick=default&pick=$css",build:()=>import("./_code_.js"),import:()=>import("./_code_.js")},$$route:{require:()=>({route:Mt}),src:"src/routes/(root)/verify/[code].tsx?pick=route"},path:"/(root)/verify/:code",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/verify/[code].tsx"},{page:!0,$component:{src:"src/routes/(root)/verify-email.jsx?pick=default&pick=$css",build:()=>import("./verify-email.js"),import:()=>import("./verify-email.js")},path:"/(root)/verify-email",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root)/verify-email.jsx"},{page:!0,$component:{src:"src/routes/(root).tsx?pick=default&pick=$css",build:()=>import("./(root).js"),import:()=>import("./(root).js")},$$route:{require:()=>({route:Lt}),src:"src/routes/(root).tsx?pick=route"},path:"/(root)",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/(root).tsx"},{page:!0,$component:{src:"src/routes/[...404].jsx?pick=default&pick=$css",build:()=>import("./_...404_.js"),import:()=>import("./_...404_.js")},path:"/*404",filePath:"C:/Users/MARIAM/Desktop/AirSense/AirSense/src/routes/[...404].jsx"}],Pt=Nt(ue.filter(e=>e.page));function Nt(e){function r(t,s,o,n){const a=Object.values(t).find(i=>o.startsWith(i.id+"/"));return a?(r(a.children||(a.children=[]),s,o.slice(a.id.length)),t):(t.push({...s,id:o,path:o.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/")}),t)}return e.sort((t,s)=>t.path.length-s.path.length).reduce((t,s)=>r(t,s,s.path,s.path),[])}function It(e,r){const t=Dt.lookup(e);if(t&&t.route){const s=t.route,o=r==="HEAD"?s.$HEAD||s.$GET:s[`$${r}`];if(o===void 0)return;const n=s.page===!0&&s.$component!==void 0;return{handler:o,params:t.params,isPage:n}}}function Tt(e){return e.$HEAD||e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const Dt=ct({routes:ue.reduce((e,r)=>{if(!Tt(r))return e;let t=r.path.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/").replace(/\*([^/]*)/g,(s,o)=>`**:${o}`).split("/").map(s=>s.startsWith(":")||s.startsWith("*")?s:encodeURIComponent(s)).join("/");if(/:[^/]*\?/g.test(t))throw new Error(`Optional parameters are not supported in API routes: ${t}`);if(e[t])throw new Error(`Duplicate API routes for "${t}" found at "${e[t].route.path}" and "${r.path}"`);return e[t]={route:r},e},{})});function Ut(e){e.forEach(r=>{if(!r.attrs.href)return;let t=document.head.querySelector(`link[href="${r.attrs.href}"]`);t||(t=document.createElement("link"),t.setAttribute("rel","preload"),t.setAttribute("as","style"),t.setAttribute("href",r.attrs.href),document.head.appendChild(t))})}var Ot=" ";const qt={style:e=>C("style",e.attrs,()=>e.children,!0),link:e=>C("link",e.attrs,void 0,!0),script:e=>e.attrs.src?C("script",Se(()=>e.attrs,{get id(){return e.key}}),()=>S(Ot),!0):null,noscript:e=>C("noscript",e.attrs,()=>y(e.children),!0)};function I(e,r){let{tag:t,attrs:{key:s,...o}={key:void 0},children:n}=e;return qt[t]({attrs:{...o,nonce:r},key:s,children:n})}function Ht(e,r,t,s="default"){return Ne(async()=>{{const n=(await e.import())[s],i=(await r.inputs?.[e.src].assets()).filter(c=>c.tag==="style"||c.attrs.rel==="stylesheet");return typeof window<"u"&&Ut(i),{default:c=>[...i.map(f=>I(f)),Ie(n,c)]}}})}function de(){function e(t){return{...t,...t.$$route?t.$$route.require().route:void 0,info:{...t.$$route?t.$$route.require().route.info:{},filesystem:!0},component:t.$component&&Ht(t.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:t.children?t.children.map(e):void 0}}return Pt.map(e)}let V;const Ft=M?()=>L().routes:()=>V||(V=de());function _t(e){const r=he(e.nativeEvent,"flash");if(r)try{let t=JSON.parse(r);if(!t||!t.result)return;const s=[...t.input.slice(0,-1),new Map(t.input[t.input.length-1])],o=t.error?new Error(t.result):t.result;return{input:s,url:t.url,pending:!1,result:t.thrown?void 0:o,error:t.thrown?o:void 0}}catch(t){console.error(t)}finally{ge(e.nativeEvent,"flash","",{maxAge:0})}}async function jt(e){const r=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await r.json(),assets:[...await r.inputs[r.handler].assets()],router:{submission:_t(e)},routes:de(),complete:!1,$islands:new Set})}const Wt=new Set([301,302,303,307,308]);function T(e){return e.status&&Wt.has(e.status)?e.status:302}function Bt(e,r,t={},s){return ie({handler:o=>{const n=D(o);return Oe(n,async()=>{const a=It(new URL(n.request.url).pathname,n.request.method);if(a){const h=await a.handler.import(),A=n.request.method==="HEAD"?h.HEAD||h.GET:h[n.request.method];n.params=a.params||{},v.context={event:n};const u=await A(n);if(u!==void 0)return u;if(n.request.method!=="GET")throw new Error(`API handler for ${n.request.method} "${n.request.url}" did not return a response.`);if(!a.isPage)return}const i=await r(n),l=typeof t=="function"?await t(i):{...t},c=l.mode||"stream";if(l.nonce&&(i.nonce=l.nonce),c==="sync"){const h=ye(()=>(v.context.event=i,e(i)),l);if(i.complete=!0,i.response&&i.response.headers.get("Location")){const A=T(i.response);return _(o,i.response.headers.get("Location"),A)}return h}if(l.onCompleteAll){const h=l.onCompleteAll;l.onCompleteAll=A=>{Q(i)(A),h(A)}}else l.onCompleteAll=Q(i);if(l.onCompleteShell){const h=l.onCompleteShell;l.onCompleteShell=A=>{Y(i,o)(),h(A)}}else l.onCompleteShell=Y(i,o);const f=ke(()=>(v.context.event=i,e(i)),l);if(i.response&&i.response.headers.get("Location")){const h=T(i.response);return _(o,i.response.headers.get("Location"),h)}if(c==="async")return f;const{writable:w,readable:$}=new TransformStream;return f.pipeTo(w),$})}})}function Y(e,r){return()=>{if(e.response&&e.response.headers.get("Location")){const t=T(e.response);Ae(r,t),we(r,"Location",e.response.headers.get("Location"))}}}function Q(e){return({write:r})=>{e.complete=!0;const t=e.response&&e.response.headers.get("Location");t&&r(`<script>window.location="${t}"<\/script>`)}}function zt(e,r,t){return Bt(e,jt,r)}function Gt(){return p(Ge,{get children(){return p(kt,{singleFlight:!0,root:e=>p(Be,{get children(){return p(Te,{get children(){return e.children}})}}),get children(){return p(Ft,{})}})}})}var Kt=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">',"</span>"],Jt=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">500 | Internal Server Error</span>'];const Vt=e=>{const r=M?"500 | Internal Server Error":"Error | Uncaught Client Exception";return p(Ue,{fallback:t=>(console.error(t),[S(Kt,k(),y(r)),p(ae,{code:500})]),get children(){return e.children}})},Yt=e=>{let r=!1;const t=De(()=>e.children,s=>{console.error(s),r=!!s});return r?[S(Jt,k()),p(ae,{code:500})]:t};var X=["<script",">","<\/script>"],Qt=["<script",' type="module"'," async","><\/script>"],Xt=["<script",' type="module" async',"><\/script>"];const Zt=S("<!DOCTYPE html>");function pe(e,r,t=[]){for(let s=0;s<r.length;s++){const o=r[s];if(o.path!==e[0].path)continue;let n=[...t,o];if(o.children){const a=e.slice(1);if(a.length===0||(n=pe(a,o.children,n),!n))continue}return n}}function er(e){const r=L(),t=r.nonce;let s=[];return Promise.resolve().then(async()=>{let o=[];if(r.router&&r.router.matches){const n=[...r.router.matches];for(;n.length&&(!n[0].info||!n[0].info.filesystem);)n.shift();const a=n.length&&pe(n,r.routes);if(a){const i=globalThis.MANIFEST.client.inputs;for(let l=0;l<a.length;l++){const c=a[l],f=i[c.$component.src];o.push(f.assets())}}}s=await Promise.all(o).then(n=>[...new Map(n.flat().map(a=>[a.attrs.key,a])).values()].filter(a=>a.attrs.rel==="modulepreload"&&!r.assets.find(i=>i.attrs.key===a.attrs.key)))}),ve(()=>s.length?s.map(o=>I(o)):void 0),p(re,{get children(){return[Zt,p(Yt,{get children(){return p(e.document,{get assets(){return[p(Re,{}),r.assets.map(o=>I(o,t))]},get scripts(){return t?[S(X,k()+x("nonce",y(t,!0),!1),`window.manifest = ${JSON.stringify(r.manifest)}`),S(Qt,k(),x("nonce",y(t,!0),!1),x("src",y(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]:[S(X,k(),`window.manifest = ${JSON.stringify(r.manifest)}`),S(Xt,k(),x("src",y(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return p(be,{get children(){return p(Vt,{get children(){return p(Gt,{})}})}})}})}})]}})}var tr=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>OpenAQ Explorer</title><link rel="icon" href="/favicon.ico" sizes="16x16 32x32"><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml">',"","</head>"],rr=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"],Z=["<script",' defer data-domain="explore.openaq.org" src="https://plausible.io/js/script.js"><\/script>'];const ee=zt(()=>p(er,{document:({assets:e,children:r,scripts:t})=>S(rr,k(),p(re,{get children(){return S(tr,Z[0]+k()+Z[1],y(e))}}),y(r),y(t))}),{mode:"async"}),Pr=ie({onRequest:G.onRequest,onBeforeResponse:G.onBeforeResponse,handler:ee,websocket:ee.__websocket__});export{Pr as default};
